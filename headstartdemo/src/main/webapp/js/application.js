function openEditScreen(a){removeAllInstanceOfEditor();$("#view_"+a+"_breadcumbs").css("display","none");$("#home_"+a+"_breadcumbs").css("display","none");$("#"+a+"quickFilterDiv").css("display","none");$("#"+a+"quickFilterDiv input").val("");$("#add_"+a+"_breadcumbs").css("display","none");$("#edit_"+a+"_breadcumbs").css("display","");$("#"+a+"_back").css("display","");$("#"+a+"_filter_form").css("display","none");$("#"+a+"_quick_filter").css("display","none");$("#"+a+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","none");$("#nav-search .sideBarBreadCrumbSpan").css("display","none");$("#"+a+"_main_div > div").css("display","none");animateDiv("edit",a);hideFilterDiv();$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","");}function openListScreen(a){$("#"+a+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","");$("#nav-search .sideBarBreadCrumbSpan").css("display","");$("#"+a+"quickFilterDiv").css("display","none");$("#"+a+"quickFilter").val("");removeAllInstanceOfEditor();$("#home_"+a+"_breadcumbs").css("display","");$("#view_"+a+"_breadcumbs").css("display","none");$("#edit_"+a+"_breadcumbs").css("display","none");$("#add_"+a+"_breadcumbs").css("display","none");$("#"+a+"_filter_form").css("display","");$("#"+a+"_quick_filter").css("display","");$("#"+a+"_back").css("display","none");$("#"+a+"_main_div > div").css("display","none");animateDiv("list",a);$("#"+a+"_breadcrumbs #plus_bar").css("display","");$("#nav-search #plus_bar").css("display","");$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openAddScreen(a){removeAllInstanceOfEditor();$("#"+a+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","none");$("#nav-search .sideBarBreadCrumbSpan").css("display","none");$("#home_"+a+"_breadcumbs").css("display","none");$("#"+a+"quickFilterDiv").css("display","none");$("#"+a+"quickFilterDiv input").val("");jsonvariable="";$("#view_"+a+"_breadcumbs").css("display","none");$("#edit_"+a+"_breadcumbs").css("display","none");$("#add_"+a+"_form").trigger("reset");$("#"+a+"_back").css("display","");$("#add_"+a+"_breadcumbs").css("display","");$("#"+a+"_filter_form").css("display","none");$("#"+a+"_quick_filter").css("display","none");$("#"+a+"_main_div > div").css("display","none");animateDiv("add",a);hideFilterDiv();$("#"+a+"_breadcrumbs #plus_bar").css("display","none");$("#nav-search #plus_bar").css("display","none");$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openDetailScreen(a){removeAllInstanceOfEditor();$("#"+a+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","none");$("#nav-search .sideBarBreadCrumbSpan").css("display","none");$("#home_"+a+"_breadcumbs").css("display","none");$("#"+a+"quickFilterDiv").css("display","none");$("#"+a+"quickFilterDiv input").val("");$("#edit_"+a+"_breadcumbs").css("display","none");$("#add_"+a+"_breadcumbs").css("display","none");$("#view_"+a+"_breadcumbs").css("display","");$("#"+a+"_filter_form").css("display","none");$("#"+a+"_quick_filter").css("display","none");$("#"+a+"_back").css("display","");$("#"+a+"_main_div > div").css("display","none");animateDiv("details",a);$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openError_404_Screen(a){$("#"+a+"_main_div > div").css("display","none");animateDiv("error_404",a);$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openError_500_Screen(a){$("#"+a+"_main_div > div").css("display","none");animateDiv("error_500",a);$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openEditScreenInline(a,b,c){$("#"+a+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","none");$("#nav-search .sideBarBreadCrumbSpan").css("display","none");$("#"+a+"quickFilterDiv").css("display","none");$("#"+a+"quickFilterDiv input").val("");removeAllInstanceOfEditor();$("#home_"+a+"_breadcumbs").css("display","none");$("#view_"+a+"_breadcumbs").css("display","none");$("#add_"+a+"_breadcumbs").css("display","none");$("#edit_"+a+"_breadcumbs").css("display","");$("#"+a+"_main_div > div").css("display","none");$("#"+a+"_back").css("display","");$("#"+a+"_filter_form").css("display","none");$("#"+a+"_quick_filter").css("display","none");animateDiv("edit",a);$("#"+a+"_breadcrumbs #plus_bar").css("display","none");$("#"+a+"_breadcrumbs #"+a+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+a+"_breadcrumbs #"+a+"EditAttachmentCommentCountDiv").css("display","none");}function openAddScreenInline(b,c){removeAllInstanceOfEditor();if(hasValue(c)){for(var a=0;a<c.length;a++){$("#add_"+b+"_form #"+c).html("");}}$("#"+b+"_breadcrumbs .sideBarBreadCrumbSpan").css("display","none");$("#nav-search .sideBarBreadCrumbSpan").css("display","none");$("#"+b+"quickFilterDiv").css("display","none");$("#"+b+"quickFilterDiv input").val("");$("#home_"+b+"_breadcumbs").css("display","none");$("#view_"+b+"_breadcumbs").css("display","none");$("#edit_"+b+"_breadcumbs").css("display","none");$("#add_"+b+"_breadcumbs").css("display","");$("#add_"+b+"_form").trigger("reset");$("#"+b+"_main_div > div").css("display","none");$("#"+b+"_back").css("display","");$("#"+b+"_filter_form").css("display","none");$("#"+b+"_quick_filter").css("display","none");animateDiv("add",b);$("#"+b+"_breadcrumbs #plus_bar").css("display","none");$("#"+b+"_breadcrumbs #"+b+"ViewAttachmentCommentCountDiv").css("display","none");$("#"+b+"_breadcrumbs #"+b+"EditAttachmentCommentCountDiv").css("display","none");}function richscript(b,c){d();function d(){var g=["Serif","Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],e=$("[title=Font]").siblings(".dropdown-menu");$.each(g,function(h,i){e.append($('<li><a data-edit="fontName '+i+'" style="font-family:\''+i+"'\">"+i+"</a></li>"));});$("a[title]").tooltip({container:"body"});$(".dropdown-menu input").click(function(){return false;}).change(function(){$(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle");}).keydown("esc",function(){this.value="";$(this).change();});$("[data-role=magic-overlay]").each(function(){var h=$(this),i=$(h.data("target"));h.css("opacity",0).css("position","absolute").offset(i.offset()).width(i.outerWidth()).height(i.outerHeight());});if("onwebkitspeechchange" in document.createElement("input")){var f=$(".editor").offset();$("#voiceBtn").css("position","absolute");}else{$("#voiceBtn").hide();}}function a(f,e){var g="";if(f==="unsupported-file-type"){g="Unsupported format "+e;}else{console.log("error uploading file",f,e);}$('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button><strong>File upload error</strong> '+g+" </div>").prependTo("#alerts");}$("#"+b+" #myEditor #editor").wysiwyg({fileUploadError:a});window.prettyPrint&&prettyPrint();}function animateDiv(c,b){var a=$("#"+c+"_"+b+"_div");a.css("marginLeft",a.outerWidth());a.animate({duration:1500,height:"toggle",marginLeft:parseInt(a.css("marginLeft"),10)==0?a.outerWidth():0});}var remembermecounter=0;var csrfCookieTime="";function openSelectBox(a,b){$("."+a).css("display","block");$("."+b).css("display","none");}function checkDatePlugin(c,d,b){var a=d.split("-")[0];if(c=="between"){$("."+a+"SelectBox").css("display","none");$("."+a+"BetweenDate").css("display","");$("#"+b+"filterTab ."+a+"BW").daterangepicker({format:dateFormat});}if(c=="specific"||c=="before"||c=="after"){$("."+a+"SelectBox").css("display","none");$("."+a+"OneDate").css("display","");$("#"+b+"filterTab ."+a+"OneDate .dateinput").attr("value",TodayDate);$("#"+b+"filterTab ."+a+"OneDate .dateinput").daterangepicker({singleDatePicker:true,format:dateFormat});$(".datepicker-days .table-condensed tbody").click(function(){$(".datepicker-dropdown").css("display","none");});}}Date.prototype.yyyymmdd=function(){var c=this.getFullYear().toString();var b=(this.getMonth()+1).toString();var a=this.getDate().toString();return c+"-"+(b[1]?b:"0"+b[0])+"-"+(a[1]?a:"0"+a[0]);};function showRegularLoading(){return false;}function showStickyLoading(){var a=$.gritter.add({title:"This is a sticky notice!",text:'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="red">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:true,time:"",class_name:"gritter-info"});return false;}function showImageLoading(){$.gritter.add({title:"This is a notice without an image!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="orange">magnis dis parturient</a> montes, nascetur ridiculus mus.',class_name:"gritter-success"});return false;}function showCenteredLoading(a){if(a!="Null values not allowed"){$.gritter.add({title:a,class_name:"gritter-success gritter-top-left",time:3000});}return false;}function showMaxLoading(){$.gritter.add({title:"This is a notice with a max of 3 on screen at one time!",text:'This will fade out after a certain amount of time. Vivamus eget tincidunt velit. Cum sociis natoque penatibus et <a href="#" class="green">magnis dis parturient</a> montes, nascetur ridiculus mus.',sticky:false,before_open:function(){if($(".gritter-item-wrapper").length>=3){return false;}},class_name:"gritter-warning"+(!$("#gritter-light").get(0).checked?" gritter-light":"")});return false;}function showErrorLoading(a){if(a!="Null values not allowed"){$.gritter.add({title:a,text:"",sticky:false,class_name:"gritter-warning gritter-top-left"});}return false;}function showNotificationLoading(){$.gritter.add({title:"This is a warning notification",text:'Just add a "gritter-light" class_name to your $.gritter.add or globally to $.gritter.options.class_name',class_name:"gritter-error"});return false;}function RemoveAllLoading(){$.gritter.removeAll();return false;}function RemoveUniqueLoading(){}function ellipsis(b){if(!hasValue(b)){b="";}if(BrowserDetect.browser=="Explorer"||BrowserDetect.browser=="Mozilla"){var a=b+"";if(a!=null&&a.length>10){return a.substring(0,10)+"...";}else{return a+"";}}else{return b+"";}}function ellipsistext(b){if(!hasValue(b)){b="";}var a=b+"";if(a!=null&&a.length>10){return a.substring(0,10)+"...";}else{return a+"";}}function logout(){logoutform.submit();}function isAuthorize(g,d,b,a){try{if(hasValue(g.responseText)){var c=g.responseText.substring(0,30);if(c.indexOf("<!DOCTYPE HTML>")==0){window.location.href=context+"/jsp/login.jsp";return false;}}if(g.status==0){showErrorLoading(logout_failure_message);return false;}if(g.status==403){showErrorLoading(access_failure_message);return false;}if(g.status==500){showErrorLoading(gettingDetails_Error);return false;}else{if(g.status==404){showErrorLoading(gettingDetails_Error);return false;}else{if(g.status==401){showErrorLoading(gettingDetails_Error);return false;}}}}catch(f){}return true;}function setCsrfCookie(){currentTime=new Date();if((currentTime-csrfCookieTime)>10000){document.cookie="csrfParam="+Math.random().toString(36).substring(7)+";Path="+csrfCookiePath+";";csrfCookieTime=new Date();}}function getCookieClosePortal(){var a=document.cookie;if(hasValue(a)){return getCookieValue("csrfParam");}return"";}function sendPOSTRequest(url,jsonParams,callbackFunc,addlParam){setCsrfCookie();showRegularLoading();$.ajax({type:"POST",url:url,headers:{csrfParam:getCookieClosePortal()},beforeSend:function(){updateRememberMetoken();ajaxCounter=ajaxCounter+1;showMainLoading();return true;},complete:function(){ajaxCounter=ajaxCounter-1;showMainLoading();},contentType:"application/json; charset=utf-8",dataType:"application/json",data:jsonParams,error:function(XMLHttpRequest,textStatus,errorThrown){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[0], arguments[1], arguments[2], "'+addlParam+'")');}else{return false;}},success:function(data,status,request){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[2], arguments[1], arguments[0], "'+addlParam+'")');}else{return false;}}});}function sendPUTRequest(url,jsonParams,callbackFunc,addlParam){setCsrfCookie();showRegularLoading();$.ajax({type:"PUT",url:url,headers:{csrfParam:getCookieClosePortal()},beforeSend:function(){updateRememberMetoken();ajaxCounter=ajaxCounter+1;showMainLoading();return true;},complete:function(){ajaxCounter=ajaxCounter-1;showMainLoading();},contentType:"application/json; charset=utf-8",dataType:"application/json",data:jsonParams,error:function(XMLHttpRequest,textStatus,errorThrown){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[0], arguments[1], arguments[2], "'+addlParam+'")');}else{return false;}},success:function(data,status,request){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[2], arguments[1], arguments[0], "'+addlParam+'")');}else{return false;}}});}function showLoading(){$("#loading-bar").html("<div class='nav alert' style='margin-top:20px'><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loading..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong></div>");$("#loading-bar").show();hideLoading();}function hideLoading(){$("#loading-bar").fadeOut(10000);}function showWarning(a){$("#loading-bar").html("<div class='nav alert alert-warning' style='margin-top:20px'><button type='button' class='close' data-dismiss='alert'><i class='icon-remove'></i></button><strong>Warning: </strong>"+a+"<br></div>");$("#loading-bar").show();hideLoading();}function showSuccessMessage(a){$("#loading-bar").html("<div class='nav alert alert-success' style='margin-top:20px'><button type='button' class='close' data-dismiss='alert'><i class='icon-remove'></i></button><strong>Successful: </strong>"+a+"<br></div>");$("#loading-bar").show();hideLoading();}function showFailureMessage(a){$("#loading-bar").html("<div class='nav alert alert-error' style='margin-top:20px'><button type='button' class='close' data-dismiss='alert'><i class='icon-remove'></i></button><strong>Error: </strong>"+a+"<br></div>");$("#loading-bar").show();hideLoading();}function showMessage(a){$("#loading-bar").html("<div class='nav alert alert-info' style='margin-top:20px'><button type='button' class='close' data-dismiss='alert'><i class='icon-remove'></i></button><strong>Message: </strong>"+a+"<br></div>");$("#loading-bar").show();hideLoading();}function updateRememberMetoken(){if(remembermecounter>=30){$.ajax({type:"GET",url:context+"/rest/Users/isUserAvailable",error:function(){},success:function(){}});}remembermecounter=0;}function showDefaultMessage(a){$("#loading-bar").html("<div class='nav alert alert-info' style='margin-top:20px'><button type='button' class='close' data-dismiss='alert'></button><strong></strong>"+a+"<br></div>");$("#loading-bar").show();hideLoading();}function showMainLoading(){var a=0;window.setTimeout(function(){a=a+1;},120000);$body=$("body");if(ajaxCounter>0){$body.addClass("newloading");window.setInterval(function(){if(a>0){$body.removeClass("newloading");}},600);}else{$body.removeClass("newloading");}}var ajaxCounter=0;function sendGETRequest(url,callbackFunc,addlParam,notShowLoading){setCsrfCookie();$.ajax({type:"GET",url:url,headers:{csrfParam:getCookieClosePortal()},beforeSend:function(){updateRememberMetoken();return true;},complete:function(){},error:function(XMLHttpRequest,textStatus,errorThrown){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[0], arguments[2].responseText, arguments[2], "'+addlParam+'")');}else{return false;}},success:function(data,status,request){if(isAuthorize(request,status,data,url,callbackFunc)){eval(callbackFunc+'(arguments[2], arguments[0], arguments[1], "'+addlParam+'")');}else{return false;}}});}function sendDELETERequest(url,json,callbackFunc,addlParam){setCsrfCookie();showRegularLoading();$.ajax({type:"DELETE",url:url,headers:{csrfParam:getCookieClosePortal()},beforeSend:function(){updateRememberMetoken();ajaxCounter=ajaxCounter+1;showMainLoading();return true;},complete:function(){ajaxCounter=ajaxCounter-1;showMainLoading();},contentType:"application/json; charset=utf-8",dataType:"application/json",data:json,error:function(XMLHttpRequest,textStatus,errorThrown){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[0], arguments[1], arguments[2], "'+addlParam+'")');}else{return false;}},success:function(data,status,request){if(isAuthorize(XMLHttpRequest,textStatus,errorThrown,url,callbackFunc)){eval(callbackFunc+'(arguments[2], arguments[1], arguments[0], "'+addlParam+'")');}else{return false;}}});}function hasValue(a){return(a!=null&&a!=undefined&&a!="null"&&a!="undefined"&&a!=""&&a!="-Please select-");}function hasValue(b,a){if(b==null){return false;}var c=b.getValue(a);return hasValue(c);}function hasValue(a){return(a!=null&&a!=undefined&&a!="null"&&a!="undefined"&&(a!=""||String(a)=="0")&&a!="-Please select-");}function searchDataByFIQL(b){var a=convertFormDataToJSON(b);a=JSON.stringify(a);a=a.replace('"selectItem":1,',"");a=$.parseJSON(a);return createFiqlQuery(b,a);}function searchDataByFIQLPermission(b){var a=convertFormDataToJSON(b);return createFiqlPermissionQuery(a);}function convertFormDataToJSON(b){var a=form2js(b,"-",true,function(c){},true);return a;}function setTypeSorting(b,c){var a=$("#"+b+"filterTab #"+c+"").attr("class");if(a=="icon-arrow-up ie-sortby cursor-pointer"){$("#"+b+"filterTab #"+c+"").attr("class","icon-arrow-down ie-sortby cursor-pointer");$("#fiql_"+b+"_form   #sort_type_value_"+b).val("asc");}if(a=="icon-arrow-down ie-sortby cursor-pointer"){$("#"+b+"filterTab #"+c+"").attr("class","icon-arrow-up ie-sortby cursor-pointer");$("#fiql_"+b+"_form   #sort_type_value_"+b).val("desc");}}function setDefaultTypeSorting(b,c){var a=$("#"+b+"filterTab #"+c+"").attr("class");$("#"+b+"filterTab #"+c+"").attr("class","icon-arrow-up ie-sortby cursor-pointer");$("#fiql_"+b+"_form   #sort_type_value_"+b).val("desc");}function setSort(g,h){var a=h;var c=jQuery("#"+g+"_grid #"+g+"_grid_view").dataTable();$("#fiql_"+g+"_form #sort_"+g+"").val(h);var e="";e=$("option:selected",$("#"+g+"SortBy")).text();if(hasValue(c.fnSettings())){var d=c.fnSettings().aoColumns.length;for(var f=0;f<d;f++){var b=c.fnSettings().aoColumns[f].sTitle;$(c.fnSettings().aoColumns[f].nTh).css("font-weight","");$(c.fnSettings().aoColumns[f].nTh).css("color","#2298e4");if(b==e){$(c.fnSettings().aoColumns[f].nTh).css("color","#B37607");$(c.fnSettings().aoColumns[f].nTh).css("font-weight","bold");}}}}function createFiqlQuery(d,e){var h="?_s=";var g="?";var f="";var c="";var a=true;var b=BrowserDetect.browser;$.each(e,function(G,s){if(hasValue(s)){if(G=="date"&&s.indexOf("To")){var B=s.split(" To ");var A=formatAsJSONdateFormat(B[0],dateFormat);A=A+" 00:00:01";A=moment(A);var l=formatAsJSONdateFormat(B[1],dateFormat);l=l+" 23:59:59";l=moment(l);if(B[0]==B[1]){h+=G+"=ge="+A+";";h+=G+"=lt="+getNextDate(B[0])+";";}else{h+=G+"=ge="+A+";";h+=G+"=le="+l+";";}}else{if(G.indexOf("Date")!=-1){if(s.selectId!="none"){a=false;var E=s.selectId;if(_.isNumber(E)){var o=getSearchDateValue(E);var u,z;if(E==0){if(b=="Explorer"||b=="Firefox"||b=="Safari"||BrowserDetect.browser=="Mozilla"){o=replaceAll("-",o,"/");}u=o+" 23:59:59";u=new Date(u);z=o+" 00:00:01";z=new Date(z);h+=G+"=ge="+z.getTime()+";"+G+"=le="+u.getTime()+";";}else{if(E==1){if(b=="Explorer"||b=="Firefox"||b=="Safari"||BrowserDetect.browser=="Mozilla"){o=replaceAll("-",o,"/");}u=o+" 23:59:59";u=new Date(u);z=o+" 00:00:01";z=new Date(z);h+=G+"=ge="+z.getTime()+";";}else{h+=G+"=ge="+o+";";}}}else{if(s.selectId=="between"){if(hasValue(s.betweendate)){var B=s.betweendate.split(" To ");var A=formatAsJSONdateFormat(B[0],dateFormat);A=A+" 00:00:01";A=moment(A);var l="";if(B[0]==B[1]){l=formatAsJSONdateFormat(B[0],dateFormat);}else{l=formatAsJSONdateFormat(B[1],dateFormat);}l=l+" 23:59:59";l=moment(l);h+=G+"=ge="+A+";";h+=G+"=le="+l+";";openSelectBox(G+"SelectBox",G+"BetweenDate");}else{openSelectBox(G+"SelectBox",G+"BetweenDate");a=true;}}if(s.selectId=="before"){h+=G+"=le="+getNextDate(s.date)+";";openSelectBox(G+"SelectBox",G+"OneDate");}if(s.selectId=="after"){var A=formatAsJSONdateFormat(s.date,dateFormat);h+=G+"=ge="+A+";";openSelectBox(G+"SelectBox",G+"OneDate");}if(s.selectId=="specific"){var A=formatAsJSONdateFormat(s.date,dateFormat);A=A+" 00:00:01";A=moment(A);var l=formatAsJSONdateFormat(s.date,dateFormat);l=l+" 23:59:59";l=moment(l);h+=G+"=ge="+A+";";h+=G+"=le="+l+";";openSelectBox(G+"SelectBox",G+"OneDate");}}}}else{if(G=="createdTime"||G=="modifiedTime"){if(hasValue(s)){a=false;var u;var z;var o=getSearchDateValue(s);if(s==0){if(b=="Explorer"||b=="Firefox"||b=="Safari"||BrowserDetect.browser=="Mozilla"){o=replaceAll("-",o,"/");}z=o+" 00:00:01";z=new Date(z);h+=G+"=ge="+z.getTime()+";";}else{if(s==1){if(b=="Explorer"||b=="Firefox"||b=="Safari"||BrowserDetect.browser=="Mozilla"){o=replaceAll("-",o,"/");}u=o+" 23:59:59";u=new Date(u);z=o+" 00:00:01";z=new Date(z);h+=G+"=ge="+z.getTime()+";"+G+"=le="+u.getTime()+";";}else{h+=G+"=ge="+o+";";}}}}else{if(_.isObject(s)){var r=G;var p="";var m=s.length;for(var G in s){if(hasValue(s[G])){a=false;if($("#"+r).hasClass("integersearch")){h+=r+"."+G+s[G]+";";}else{var D=s[G];var n=false;if(hasValue(D.length)){var t=JSON.stringify(s);if(t.indexOf("{")!=-1){varKey=t.substring(1,(t.length-1));splitValue=varKey.split(":");splitLeftValue=splitValue[0];splitRightValue=splitValue[1];finalKey=splitLeftValue.substring(1,(splitLeftValue.length-1));splitRightValue=splitRightValue.substring(1,(splitRightValue.length-1));var v=JSON.stringify(e);var C=[];var q="";var w;for(i=0;i<=v.length;i+=w){if(v[i]!="["){q+=v[i];w=1;}else{q=q.substring(0,q.length-2);q=q.substring(0,q.lastIndexOf(":")-1);q=q.substring(q.lastIndexOf('"')+1,q.length);C.push(q);srt="";w=2;}}var F="";var x;for(w=0;w<C.length;w++){for(i=1;i<=splitRightValue.length;i+=x){if(splitRightValue[i]!='"'){F+=splitRightValue[i];x=1;}else{p+=C[w]+"."+finalKey+"=="+F+",";x=3;F="";}}}n=true;}if(!n){p+=r+"=="+D+",";}m=m-1;if(m==0||n){if(hasValue(p)){var y="(";p=p.substring(0,(p.length-1));y+=p;y+=");";h+=y;}}}else{h+="("+r+"."+G+"=="+D+");";}}}}}else{if(!_.isNaN(s)){if(G!="orderBy"&&G!="orderType"){hasValue(s);a=false;if($("#"+d.id+" #"+G).hasClass("integersearch")){h+=G+s+";";}else{h+=G+"=="+s+";";}}}}}}}}});if(a){if(hasValue(currentDomainId)){f+="_s=domain.domainid=="+currentDomainId;}if(hasValue(e.orderBy)){f+="&orderBy="+e.orderBy;if(hasValue(e.orderType)){f+="&orderType="+e.orderType;}}f+="&ulimit="+pageulimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT;c=g+f;}else{if(hasValue(currentDomainId)){f+=";domain.domainid=="+currentDomainId;}if(hasValue(e.orderBy)){f+="&orderBy="+e.orderBy;if(hasValue(e.orderType)){f+="&orderType="+e.orderType;}}f+="&ulimit="+pageulimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT;if(h=="?_s="){h="?"+f;}else{h=h.substring(0,(h.length-1))+f;}c=h;}return c;}function createFiqlPermissionQuery(c){var f="?_s=";var e="?";var d="";var b="";var a=true;$.each(c,function(h,j){if(hasValue(j)){if(h=="date-range-picker"){var g=j.split(" To ");f+="date=ge="+g[0]+";";f+="date=le="+g[1]+";";}else{if(h=="createdTime"||h=="modifiedTime"||(h.indexOf("Date")!=-1)){if(hasValue(j)){a=false;f+=h+"=ge="+getSearchDateValue(j)+";";}}else{if(_.isObject(j)){var l=h;for(var h in j){if(hasValue(j[h])){a=false;f+=l+"."+h+"=="+j[h]+";";}}}else{if(!_.isNaN(j)){if(h!="orderBy"&&h!="orderType"){hasValue(j);a=false;f+=h+"=="+j+";";}}}}}}});if(a){if(hasValue(currentDomainId)){d+="_s=domain.domainid=="+currentDomainId;}if(hasValue(c.orderBy)){d+="&orderBy="+c.orderBy;if(hasValue(c.orderType)){d+="&orderType="+c.orderType;}}d+="&ulimit="+pageulimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT;b=e+d;}else{if(hasValue(c.orderBy)){d+="&orderBy="+c.orderBy;if(hasValue(c.orderType)){d+="&orderType="+c.orderType;}}d+="&ulimit="+pageulimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT;f=f.substring(0,(f.length-1))+d;b=f;}return b;}function pagPrev(contentId,searchCallID,callback,llimitid,ulimitid,currentpageno,gridId,isdeleted){showRegularLoading();var param="fiql"+searchCallID+"Param";param=eval(param);var increment=eval($("#"+contentId+"_value").val());$("#"+contentId+"_next").css("display","");pagellimit=parseInt($("#"+contentId+" #"+llimitid).val());pageulimit=parseInt($("#"+contentId+" #"+ulimitid).val());var flagTag=searchCallID+"flag";var flag=eval(flagTag);var newContent=$("#"+contentId+" #content").text();pagellimit-=increment;pageulimit-=increment;$("#"+contentId+" #"+llimitid).val(pagellimit);$("#"+contentId+" #"+ulimitid).val(pageulimit);if(pageulimit<increment-1){$("#"+currentpageno).html(1);$("#"+contentId+" #content").text("Can not go previous");$("#"+contentId+"_pre").css("display","none");}else{if($("#"+contentId+" #content").html()!="Can not go next"){var currentpage=eval($("#"+currentpageno).html());currentpage=currentpage-1;$("#"+currentpageno).html(currentpage);}if(hasValue(param)){var index=param.indexOf("ulimit");var newparam=param.substr(0,index);$("#"+contentId+" #content").text(pagination_showing+" "+(pagellimit+1)+" "+pagination_to+" "+(pageulimit+1)+" "+pagination_entries+" ");var emailValue=eval($("#sort_"+gridId+"_byemail").val());var orderbycall=$("#fiql_"+gridId+"_form #sort_"+gridId+"").val();var ordertypecall=$("#fiql_"+gridId+"_form #sort_type_value_"+gridId+"").val();if(hasValue(emailValue)){sendGETRequest(context+"/rest/"+searchCallID+"/"+param+"&ulimit="+(pageulimit)+"&llimit="+pagellimit+"&orderBy="+orderbycall+"&orderType="+ordertypecall,callback,"","");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search"+newparam+"ulimit="+(pageulimit-1)+"&llimit="+pagellimit,callback,"","");}window.setTimeout(function(){setSort(gridId,$("#list_"+gridId+"_div #sort_"+gridId).val());},1000);}else{$("#"+contentId+" #content").text(pagination_showing+" "+(pagellimit+1)+" "+pagination_to+" "+(pageulimit+1)+" "+pagination_entries+" ");var orderbycall=$("#fiql_"+gridId+"_form #sort_"+gridId+"").val();var ordertypecall=$("#fiql_"+gridId+"_form #sort_type_value_"+gridId+"").val();if(hasValue(orderbycall)&&hasValue(ordertypecall)){if(isdeleted){var isdeletedValue=$("#isdeletedFalse").val();sendGETRequest(context+"/rest/"+searchCallID+"/search?_s=isdeleted=="+isdeletedValue+"&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search?&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}window.setTimeout(function(){setSort(gridId,$("#list_"+gridId+"_div #sort_"+gridId).val());},1000);}else{if(!hasValue(orderbycall)){orderbycall="modifiedTime";}if(!hasValue(ordertypecall)){ordertypecall="desc";}if(isdeleted){var isdeletedValue=$("#isdeletedFalse").val();sendGETRequest(context+"/rest/"+searchCallID+"/search?_s=isdeleted=="+isdeletedValue+"&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search?&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}window.setTimeout(function(){setSort(gridId,$("#list_"+gridId+"_div #sort_"+gridId).val());},1000);}}}}function pagNext(contentId,searchCallID,callback,llimitid,ulimitid,currentpageno,gridId,isdeleted){showRegularLoading();var param="fiql"+searchCallID+"Param";param=eval(param);var increment=eval($("#"+contentId+"_value").val());$("#"+contentId+"_pre").css("display","");pagellimit=parseInt($("#"+contentId+" #"+llimitid).val());pageulimit=parseInt($("#"+contentId+" #"+ulimitid).val());var flagTag=searchCallID+"flag";var flag=eval(flagTag);var newContent=$("#"+contentId+" #content").text();pagellimit+=increment;pageulimit+=increment;$("#"+contentId+" #"+llimitid).val(pagellimit);$("#"+contentId+" #"+ulimitid).val(pageulimit);if(flag<increment-1){$("#"+contentId+" #content").text("Can not go next");$("#"+contentId+"_next").css("display","none");}else{if($("#"+contentId+" #content").html()!="Can not go previous"){var currentpage=eval($("#"+currentpageno).html());currentpage=currentpage+1;$("#"+currentpageno).html(currentpage);}if(hasValue(param)){var index=param.indexOf("ulimit");var newparam=param.substr(0,index);$("#"+contentId+" #content").text(pagination_showing+" "+(pagellimit+1)+" "+pagination_to+" "+(pageulimit+1)+" "+pagination_entries+" ");var emailValue=eval($("#sort_"+gridId+"_byemail").val());var orderbycall=$("#fiql_"+gridId+"_form #sort_"+gridId+"").val();var ordertypecall=$("#fiql_"+gridId+"_form #sort_type_value_"+gridId+"").val();if(hasValue(emailValue)){sendGETRequest(context+"/rest/"+searchCallID+"/"+param+"&ulimit="+(pageulimit)+"&llimit="+pagellimit+"&orderBy="+orderbycall+"&orderType="+ordertypecall,callback,"","");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search"+newparam+"ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"","");}window.setTimeout(function(){setSort(gridId,$("#list_"+gridId+"_div #sort_"+gridId).val());},1000);}else{$("#"+contentId+" #content").text(pagination_showing+" "+(pagellimit+1)+" "+pagination_to+" "+(pageulimit+1)+" "+pagination_entries+" ");var orderbycall=$("#fiql_"+gridId+"_form #sort_"+gridId+"").val();var ordertypecall=$("#fiql_"+gridId+"_form #sort_type_value_"+gridId+"").val();if(hasValue(orderbycall)&&hasValue(ordertypecall)){if(isdeleted){var isdeletedValue=$("#isdeletedFalse").val();sendGETRequest(context+"/rest/"+searchCallID+"/search?_s=isdeleted=="+isdeletedValue+"&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search?&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}}else{if(!hasValue(orderbycall)){orderbycall="modifiedTime";}if(!hasValue(ordertypecall)){ordertypecall="desc";}if(isdeleted){var isdeletedValue=$("#isdeletedFalse").val();sendGETRequest(context+"/rest/"+searchCallID+"/search?_s=isdeleted=="+isdeletedValue+"&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}else{sendGETRequest(context+"/rest/"+searchCallID+"/search?&orderBy="+orderbycall+"&orderType="+ordertypecall+"&ulimit="+(pageulimit)+"&llimit="+pagellimit,callback,"");}}window.setTimeout(function(){setSort(gridId,$("#list_"+gridId+"_div #sort_"+gridId).val());},1000);}}}function formatAsDate(d,f,g){if(hasValue(d)){if(!hasValue(f)){f="-";}var a=new Date(d);var c=a.getFullYear()+f;var e=a.getMonth()+1+"";var b=a.getDate()+"";e=(e.length==1?("0"+e):e);b=(b.length==1?("0"+b):b);c+=e+f+b;return c;}else{return"";}}function formatAsDateandTime(d,e,f){var b=d;if(hasValue(d)){if(_.isNumber(d)){if(!hasValue(e)){e="-";}var a=new Date(d);var c=a.getDate()+e+getMonthName(a.getMonth());if(f){c+=e+a.getFullYear();}c+="&nbsp;"+moment(b).tz(timeZone).format("hh:mm:ss a");return c;}else{return"--";}}else{return"--";}}function getMonthName(b){var a="Unknown";switch(b){case 0:a="Jan";break;case 1:a="Feb";break;case 2:a="Mar";break;case 3:a="Apr";break;case 4:a="May";break;case 5:a="Jun";break;case 6:a="Jul";break;case 7:a="Aug";break;case 8:a="Sep";break;case 9:a="Oct";break;case 10:a="Nov";break;case 11:a="Dec";break;}return a;}function getSearchDateValue(a){var b="";if(a=="Any_time"){b="";}if(a=="0"){b=new Date();}if(a=="1"){b=getBeforeDate("1");}if(a=="7"){b=getCurrentWeek();}if(a=="15"){b=getBeforeDate("15");}if(a=="30"){b=getCurrentMonth();}if(a=="90"){b=getCurrentQuarter();}if(a=="365"){b=getCurrentYear();}if(hasValue(b)){return convertToSendFormatFordate(b);}else{return"";}}function getBeforeDate(f){var c=new Date();var e=c.getTime();var b=1000*60*60*24;var d=e-(parseInt(f)*b);var a=new Date(d);return a;}function getCurrentWeek(){var c=new Date();var b=new Date(c.setDate(c.getDate()-c.getDay()));var a=new Date(c.setDate(c.getDate()-c.getDay()+6));return b;}function getCurrentMonth(){var b=new Date();var a=new Date(b.getFullYear(),b.getMonth(),1);return a;}function getCurrentQuarter(){var a=new Date();var b=a.getMonth();if(b==0||b==1||b==2){return new Date(a.getFullYear(),0,1);}if(b==3||b==4||b==5){return new Date(a.getFullYear(),3,1);}if(b==6||b==7||b==8){return new Date(a.getFullYear(),6,1);}if(b==9||b==10||b==11){return new Date(a.getFullYear(),9,1);}}function getCurrentYear(){var a=new Date();return new Date(a.getFullYear(),0,1);}function convertToSendFormatFordate(b){var a=b.getDate();var e=b.getMonth()+1;var d=b.getFullYear();var h=b.getHours();var f=b.getMinutes();var c=b.getSeconds();var g=d+"-"+e+"-"+a;return g;}function isIntegar(b){var a=/^\d+$/.test(b);return a;}function convertTimeStamp2Date(d,c,b){if(d!=null){var a;if(isIntegar(d)){a=new Date(parseInt(d));}else{a=new Date(d);}var e=a.toDateString();return e;}return"";}function convertTimeStamp2DateTimeForToolTip(e,d,c){var a=e;if(e!=null){var b;if(isIntegar(e)){b=new Date(parseInt(e));}else{b=new Date(e);}var f=localizeDateString(b,dateFormat)+" "+moment(a).tz(timeZone).format("hh:mm:ss a");return f;}return"";}function convertTimeStamp2DateTime(e,d,c){var a=e;if(e!=null){var b;if(isIntegar(e)){b=new Date(parseInt(e));}else{b=new Date(e);}var g=localizeDateString(b,dateFormat)+" "+moment(a).tz(timeZone).format("hh:mm:ss a");if(BrowserDetect.browser=="Explorer"||BrowserDetect.browser=="Mozilla"){var f=g+"";if(f!=null&&f.length>10){return f.substring(0,10)+"...";}else{return f+"";}}else{return g+"";}}}function checkException(c){$("#MsgBoxBack").css("display","none");if(hasValue(c)){var a=c;if(a.indexOf("errors")!=-1){var b=JSON.parse(a);showErrorLoading(JSON.stringify(b.errors[0].name)+" "+JSON.stringify(b.errors[0].value.message));return true;}if(a.indexOf("excpmesg")!=-1){var b=JSON.parse(a);showErrorLoading(b.excpmesg);return true;}else{return false;}}}function commentValidate(a){var b=$("#"+a+" #comment").val().trim();if(hasValue(b)){return true;}else{showErrorLoading(comment_add_blank_message);return false;}}function commentAdd(c){if(commentValidate(c)){var d=$("#"+c+" #comment").val();var a=uploadid;var b='{"'+foreignKey+'":{"'+primaryKey+'":'+a+'},"comment":'+JSON.stringify(d)+"}";sendPOSTRequest(context+"/rest/Comment/createComment",b,"addCommentcallback",c);}}function makeFirstLetterUpperCase(b){if(hasValue(b)){var a=b.charAt(0).toUpperCase()+b.slice(1);return a;}return b;}function addCommentcallback(XMLHttpRequest,data,rpcRequest,formId){if(XMLHttpRequest.status==200){if(hasValue(XMLHttpRequest.responseText)){var responseMessage=XMLHttpRequest.responseText;if(responseMessage.indexOf("errorMsg")!=-1){showErrorLoading(getServerErrorMsg(XMLHttpRequest.responseText));}else{$("#"+formId).trigger("reset");$(".modal-backdrop").css("z-index",-3);$("#"+formId.split("_")[0]+"_comment_modal").fadeOut();showCenteredLoading(comment_add_success_message);var entityName=formId.split("_")[0];eval("refreshAll"+makeFirstLetterUpperCase(entityName)+"List()");}}}else{if(hasValue(XMLHttpRequest.responseText)){showErrorLoading(getServerErrorMsg(XMLHttpRequest.responseText));}}}function calculate_time_difference(f){var d=new Date(parseInt(f));var b=new Date();var g=(b-d);var e=Math.round(g/86400000);var a=Math.round((g%86400000)/3600000);var c=Math.round(((g%86400000)%3600000)/60000);if(e!=0){return d.toDateString();}else{if(a!=0){return a+"hr";}else{return c+"min";}}}function imageUploaded(a){if(a){showCenteredLoading(imageupload_success_message);}else{showErrorLoading(imageupload_failure_message);}}function getIndexOfTableByName(c,b){for(var a=0;a<c.aoColumns.length;a++){if(c.aoColumns[a].sTitle==$.trim(b)){return a;}}}function statuscheck(b,a){if(b==500){openError_500_Screen(a);return false;}else{if(b==404){openError_404_Screen(a);return false;}}return true;}function hasSession(){isSessionAvailable();}function isSessionAvailable(){sendGETRequest(context+"/rest/Users/isUserAvailable","isSessionAvailableCallback","","");}function isSessionAvailableCallback(b,c,a){if(b.status==200){}else{}}function commentAddpress(a){$("#"+a).find("input:text").keypress(function(b){if(b.keyCode==13){commentAdd(a);return false;}else{}});}function getCurrentDate(){var a=new Date();return a.getFullYear()+"-"+(((a.getMonth()+1)<10)?"0":"")+(a.getMonth()+1)+"-"+((a.getDate()<10)?"0":"")+a.getDate();}function Dateinlineformat(b){var a=new Date(b);return a.getFullYear()+"-"+(((a.getMonth()+1)<10)?"0":"")+(a.getMonth()+1)+"-"+((a.getDate()<10)?"0":"")+a.getDate();}function customHideColoumn(b,a){}function customInlineCall(b,a){jQuery("#"+a).saveRow(b,true,"clientArray");var g=jQuery("#"+a).getRowData(b);var c=JSON.stringify(g);var f=c.replace(":{",'":{"');f=f.replace('!@#$%^&"','"}');var e=a.split("_grid");var d=e[0].substr(0,1).toUpperCase()+e[0].substr(1);jQuery("#"+a).jqGrid("hideCol","actions_inline");jQuery("#"+a).jqGrid("showCol","actions");sendPUTRequest(context+"/rest/"+d+"/update/",f,"edit_"+e[0]+"_callback","");}function getHdrCtrlDataWithValue(data,valueItem,fieldItem,isAppendNull){var isAppend=false;if(hasValue(isAppendNull)){isAppend=true;}if(data!==null){var arrStr="";if(isAppendNull){arrStr='{"":"  -  ",';}else{arrStr="{";}for(var i=0;i<data.length;i++){arrStr+='"'+eval("arguments[0]["+i+"]."+fieldItem)+'":"'+eval("arguments[0]["+i+"]."+valueItem)+'",';}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="}";return arrStr;}}function mergeTwoJSON(b,a){b=b.substring(0,b.length-1);a=a.substring(1,a.length);b+=","+a;return b;}function checkStringInArray(a,d){var b=0;for(var c=0;c<a.length;c++){if(a[c]==d){b=1;return true;}if(b==0){return false;}}}function getIndexStringInArray(a,c){for(var b=0;b<a.length;b++){if(a[b]==c){return b;}}}function dateformatforHistory(a){var b=a;if(hasValue(a)){b=b.substr(0,(b.length-2));}else{b="--";}return b;}function replaceUnderscore(b){if(hasValue(b)){b=b.toString();if(b.indexOf("_")!=-1){var a=b.split("_");var d="";for(var c=0;c<a.length;c++){d+=a[c]+" ";}return d;}else{return b;}}else{return"--";}}function makeFirstLetterUpperCaseAndRemoveUnderscore(b){if(hasValue(b)){var a=b.charAt(0).toUpperCase()+b.slice(1);return replaceAll("_",a," ");}return b;}function replaceIncaseSensitiveString(c,d,e){var a=true;if(hasValue(e)){a=false;}var b=new RegExp("("+d+")","gi");if(a){c=c.replace(b,'<span class="highlighted">$1</span>');}else{c=c.replace(b,"<span>$1</span>");}return c;}function replaceAll(b,e,d){var c="";if(e!=null&&b!=null){var a=e.indexOf(b);while(a>-1){c+=e.substr(0,a);c+=d;e=e.substr(a+b.length,e.length);a=e.indexOf(b);}c+=e;}return c;}function getUniqueArray(a){if(a.length>0){return _.uniq(a);}return a;}function resetTestEditor(a){$("#"+a+" #editor").text("");$("#"+a).trigger("reset");$("#"+a+" .editorcheck").html("");$(".date .span2").attr("value",getCurrentDate());}function formatRichTextValue(a){a=replaceAll("\\",a,"\\\\");a=replaceAll('"',a,'\\"');return a;}function checkResponseIsXML(a){if(hasValue(a)){if(a.charAt(0)=="<"){return true;}}return false;}function getParam(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var d=new RegExp(a);var c=d.exec(window.location.href);if(c==null){return"";}else{return c[1];}}function setUserLocale(){if(UserLang=="fr"){UserLang="french";}if(UserLang=="sp"){UserLang="spanish";}if(!hasValue(userLanguage)){window.location.href=context+"/jsp/index.jsp?locale="+UserLang;}}function commonDialogBox(text,callfunc){$("#MsgBoxBack").css("display","");$.SmartMessageBox({title:"Are you sure",content:text,buttons:"[Cancel][Ok]"},function(ButtonPressed){if(ButtonPressed==="Ok"){eval(callfunc);}if(ButtonPressed==="Cancel"){$("#MsgBoxBack").css("display","none");}});}function callEditor(){$(".editorcheck").on("click",function(){var b;for(b in CKEDITOR.instances){var a=CKEDITOR.instances[b];if(this&&this==a.element.$){return;}}$(this).attr("contenteditable",true);CKEDITOR.inline(this);});}function removeEditorDiv(a,b){}function removeAllInstanceOfEditor(){for(name in CKEDITOR.instances){CKEDITOR.instances[name].destroy();}}function replaceUnderscore(b){if(hasValue(b)){b=b.toString();if(b.indexOf("_")!=-1){var a=b.split("_");var d="";for(var c=0;c<a.length;c++){d+=a[c]+" ";}return d;}else{return b;}}else{return"--";}}function getColoumnList(b){var d=getKeyFromListOfObjects(b);var c=new Array();for(var a=0;a<d.length;a++){if(isUrl(d[a])){c.push({sTitle:d[a],mData:d[a],mRender:showImageUrl});}else{c.push({sTitle:d[a],mData:d[a]});}}return c;}function getKey(a){var b=new Array();$.each(a,function(c,d){b.push(c);});return b;}function getKeyFromListOfObjects(a){var b=new Array();$.each(a[0],function(c,d){b.push(c);});return b;}function isUrl(a){a=a.toLowerCase();if(a.indexOf("url")>0){return true;}return false;}function showImageUrl(a){var b=a.substring(a.lastIndexOf(".")+1);if(b==="gif"||b==="jpg"||b==="png"||b==="BMP"){return"<img src='"+a+"'></img>";}return a;}function getColoumnListWADL(data){var keyList=new Array();var colList=new Array();var newData=eval(data);$.each(newData[0],function(key,value){if(!(_.isObject(value))){keyList.push(key);}});for(var i=0;i<keyList.length;i++){colList.push({sTitle:keyList[i],mData:keyList[i]});}return colList;}function isList(b){if(b.indexOf("[")==-1){var a="[";a=a+b+"]";return JSON.parse(a);}return JSON.parse(b);}function getColoumnListWADL(c){var e=new Array();var d=new Array();var b=c;$.each(b[0],function(f,g){if(!(_.isObject(g))){e.push(f);}});for(var a=0;a<e.length;a++){d.push({sTitle:e[a],mData:e[a]});}return d;}function getNextDate(b){var d=formatAsJSONdateFormat(b,dateFormat);var c=new Date(d);var a=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1);return convertToSendFormatFordate(a);}var KMBKLCrFormat="";function formatValueinKandM(d){if(DataFormater=="indian"){KMBKLCrFormat="Indian";}var e="K";var c="Mn";var b="Bn";var a=1;if(d<0){a=-1;d=d*(-1);}if(KMBKLCrFormat=="Indian"){e="K";c="L";b="Cr";if(d>1000&&d<100000){return(convertIn2Digit(d/1000)*(a))+"&nbsp;"+e;}else{if(d>=100000&&d<10000000){return(convertIn2Digit(d/100000)*(a))+"&nbsp;"+c;}else{if(d>=10000000){return(convertIn2Digit(d/10000000)*(a))+"&nbsp;"+b;}}}}else{if(d>1000&&d<1000000){return(convertIn2Digit(d/1000)*(a))+"&nbsp;"+e;}else{if(d>=1000000&&d<1000000000){return(convertIn2Digit(d/1000000)*(a))+"&nbsp;"+c;}else{if(d>=1000000000){return(convertIn2Digit(d/1000000000)*(a))+"&nbsp;"+b;}}}}if(d==0){return INFINITY_INDICATOR;}return convertIn2Digit(d);}function convertIn2Digit(b,a){if(!hasValue(a)){a=false;}if(!a&&isInfinity(b)){return INFINITY_INDICATOR;}b=parseFloat(b);return b.toFixed(2);}function isInfinity(a){return !hasValue(a)||a.toString().toLowerCase()=="infinity"||isNaN(Number(a));}function localizeDateString(d,b){var f=d;var a="--";if(hasValue(d)){switch(b){case"MM/DD/YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=e+"/"+c+"/"+f.getFullYear();break;case"YYYY/MM/DD":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=f.getFullYear()+"/"+e+"/"+c;break;case"DD/MM/YY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"/"+e+"/"+f.getFullYear().toString().substr(2,2);break;case"DD/MM/YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"/"+e+"/"+f.getFullYear();break;case"YYYY-MM-DD":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=f.getFullYear()+"-"+e+"-"+c;break;case"DD-MM-YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"-"+e+"-"+f.getFullYear();break;case"DD-MMM-YYYY":a=formatAsDateINMMM(f,"-",true,false);break;}return a;}return"--";}function localizeDateTimeString(d,b){var f=d;var a="--";if(hasValue(d)&&d.toString()!=="Invalid Date"){switch(b){case"MM/DD/YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=e+"/"+c+"/"+f.getFullYear()+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"YYYY/MM/DD":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=f.getFullYear()+"/"+e+"/"+c+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"DD/MM/YY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"/"+e+"/"+f.getFullYear().toString().substr(2,2)+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"DD/MM/YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"/"+e+"/"+f.getFullYear()+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"YYYY-MM-DD":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=f.getFullYear()+"-"+e+"-"+c+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"DD-MM-YYYY":var e=f.getMonth()+1+"";var c=f.getDate()+"";c=(c.length==1?("0"+c):c);e=(e.length==1?("0"+e):e);a=c+"-"+e+"-"+f.getFullYear()+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;case"DD-MMM-YYYY":a=formatAsDateINMMM(f,"-",true,false)+" "+moment(f.getTime()).tz(timeZone).format("hh:mm:ss");break;}return a;}return"--";}function formatAsDateINMMM(d,e,f,c){if(hasValue(d)){if(!hasValue(e)){e="-";}var a=new Date(d);var b=a.getDate()+e+getMonthName(a.getMonth());if(f){if(c){b+=e+a.getFullYear();}else{b+=e+a.getFullYear();}}return b;}else{return"--";}}function formatAsJSONdateFormat(d,c){var b="--";if(hasValue(d)){switch(c){case"YYYY-MM-DD":var e=d.split("-");b=e[0]+"-"+e[1]+"-"+e[2];break;case"DD-MM-YYYY":var e=d.split("-");b=e[2]+"-"+e[1]+"-"+e[0];break;case"MM/DD/YYYY":var e=d.split("/");b=e[2]+"-"+e[0]+"-"+e[1];break;case"DD/MM/YY":var e=d.split("/");b="20"+e[2]+"-"+e[1]+"-"+e[0];break;case"YYYY/MM/DD":var e=d.split("/");b=e[0]+"-"+e[1]+"-"+e[2];break;case"DD-MMM-YYYY":var e=d.split("-");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];b=e[2]+"-"+(a.indexOf(e[1])+1)+"-"+e[0];break;}return b;}return"";}function formatAsJSONdateTimeFormat(d,c){var e=BrowserDetect.browser;var g="--";if(hasValue(d)){switch(c){case"yyyy-MM-dd hh:mm:ss":var b=d.split("-");var h=b[2];var j=h.split(" ");g=b[0]+"-"+b[1]+"-"+j[0]+" "+j[1];g=new Date(g);g=g.getTime();if(e=="Explorer"||e=="Firefox"||e=="Safari"||BrowserDetect.browser=="Mozilla"){var f=b[1]+"/"+j[0]+"/"+b[0]+" "+j[1];g=new Date(f).getTime();}break;case"dd-MM-yyyy hh:mm:ss":var b=d.split("-");var h=b[2];var j=h.split(" ");g=j[0]+"-"+b[1]+"-"+b[0]+" "+j[1];g=new Date(g);g=g.getTime();break;case"MM/dd/yyyy hh:mm:ss":var b=d.split("/");var h=b[2];var j=h.split(" ");g=j[0]+"-"+b[0]+"-"+b[1]+" "+j[1];g=new Date(g);if(e=="Explorer"||e=="Firefox"||e=="Safari"||BrowserDetect.browser=="Mozilla"){g=new Date(d);}g=g.getTime();break;case"dd/MM/yyyy hh:mm:ss":var b=d.split("/");var h=b[2];var j=h.split(" ");g=j[0]+"-"+b[1]+"-"+b[0]+" "+j[1];g=new Date(g);g=g.getTime();break;case"yyyy/MM/dd hh:mm:ss":var b=d.split("/");var h=b[2];var j=h.split(" ");g=b[0]+"-"+b[1]+"-"+j[0]+" "+j[1];g=new Date(g);g=g.getTime();if(e=="Explorer"||e=="Firefox"||e=="Safari"||BrowserDetect.browser=="Mozilla"){g=new Date(d).getTime();}break;case"dd-mmm-yyyy hh:mm:ss":var b=d.split("-");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];g=b[2]+"-"+b[1]+"-"+b[0]+" "+moment(d).tz(timeZone).format("hh:mm:ss");g=new Date(g);g=g.getTime();break;}return g;}return"";}function getMonthNumAccordingToName(b){var a="Unknown";switch(b){case"Jan":a="01";break;case"Feb":a="02";break;case"Mar":a="03";break;case"Apr":a="04";break;case"May":a="05";break;case"Jun":a="06";break;case"Jul":a="07";break;case"Aug":a="08";break;case"Sep":a="09";break;case"Oct":a="10";break;case"Nov":a="11";break;case"Dec":a="12";break;}return a;}function getDateFormatAccordingToEnum(b){var a="yyyy-mm-dd";switch(b){case"mmddyy_slash":a="DD/MM/YY";break;case"mmddyyyy_slash":a="MM/DD/YYYY";break;case"yymmdd_slash":a="YYYY/MM/DD";break;case"yyyymmdd_dash":a="YYYY-MM-DD";break;case"ddMMyy_dash":a="DD-MM-YYYY";break;case"ddMMyyyy_dash":a="DD-MMM-YYYY";break;}return a;}function getDateFormatForTimeAccordingToEnum(b){var a="yyyy-mm-dd hh:mm:ss";switch(b){case"mmddyy_slash":a="dd/MM/yyyy hh:mm:ss";break;case"mmddyyyy_slash":a="MM/dd/yyyy hh:mm:ss";break;case"yymmdd_slash":a="yyyy/MM/dd hh:mm:ss";break;case"yyyymmdd_dash":a="yyyy-MM-dd hh:mm:ss";break;case"ddMMyy_dash":a="dd-MM-yyyy hh:mm:ss";break;case"ddMMyyyy_dash":a="dd-MM-yyyy hh:mm:ss";break;}return a;}function get_column_number_For_Quick_Filter(name,table){var findtable=eval(table+"Table");var aoColumns=findtable.fnSettings().aoColumns;var numcols=aoColumns.length;var colList=new Array();for(k=0;k<numcols;k++){if(findtable.fnSettings().aoColumns[k].bVisible){colList.push({index:k,name:findtable.fnSettings().aoColumns[k].sTitle});}}for(i=0;i<colList.length;i++){console.dir(i);col=colList[i].name;if(col==name){return i;}}}function showQuickFilterDiv(c,a,b){$("#"+a+"_grid_view th").each(function(f,e){if(f==c){var d=$(this).position();var g=$(this).width();$("#"+a+"quickFilterDiv").css({top:d.top-40,left:d.left+7});$("#"+a+"quickFilter").css({width:g});$("#"+a+"quickFilter").attr("placeholder",b);}});}function htmlEncode(a){if(a){return jQuery("<div />").text(a).html();}else{return"";}}function htmlDecode(a){if(a){return $("<div />").html(a).text();}else{return"";}}function showHideFilterContent(d){var a=[];var c=[];var f=$("#"+d+"_grid_view").dataTable();for(i=0;i<=(f.fnSettings().aoColumns.length);i++){if(hasValue(f.fnSettings().aoColumns[i])){if(!(f.fnSettings().aoColumns[i].bVisible)){if(hasValue(f.fnSettings().aoColumns[i].contextid)){var b=(f.fnSettings().aoColumns[i].contextid);a.push(b);}}if((f.fnSettings().aoColumns[i].bVisible)){if(hasValue(f.fnSettings().aoColumns[i].contextid)){var b=(f.fnSettings().aoColumns[i].contextid);c.push(b);}}}}$("#"+d+"_breadcrumbs #"+d+"_Quick_UL li").each(function(){var h=$(this).attr("id");if(hasValue(h)){var l=h.split("_");var j=l[0];j=j.toUpperCase();for(i=0;i<a.length;i++){var e=a[i].toUpperCase();if(j==e){$("#"+d+"_breadcrumbs #"+d+"_Quick_UL #"+h).hide();}}for(i=0;i<c.length;i++){var e=c[i].toUpperCase();if(j==e){$("#"+d+"_breadcrumbs #"+d+"_Quick_UL #"+h).show();}}}});try{$(".filterList").css("display","none");}catch(g){}}function getCookieValue(b){var c=document.cookie;var d=c.indexOf(" "+b+"=");if(d==-1){d=c.indexOf(b+"=");}if(d==-1){c=null;}else{d=c.indexOf("=",d)+1;var a=c.indexOf(";",d);if(a==-1){a=c.length;}c=unescape(c.substring(d,a));}return c;}function htmlParametersInBootstrapTable(c,b,a){if(hasValue(c)){if(c.length>60){return"<div style='height: 75px; overflow-y: auto;'>"+htmlDecode(c)+"</div>";}else{return htmlDecode(c);}}return EMPTY_DATA_VAR;}function ellipsis(a){if(a!=null){if(a.length>15){a=a.substring(0,15)+" ...";}}return a;}function getImagePath(a){return context+"/images/"+a;}function getCustomImage(c,b,f,g,e){var d="";if(hasValue(g)){d="width: "+g+"px;";}if(hasValue(e)){d+="height: "+e+"px;";}var a="",h="pointer";if(hasValue(f)){a=" onclick='"+f+"'";}return"<img class='img-responsive no-border-and-radius' title='"+b+"' alt='"+b+"' src='"+getImagePath(c)+"' "+a+" style=' "+d+" cursor: "+h+"; cursor:hand;'/>";}function hideFilterDiv(){try{$(".filterList").css("display","none");}catch(a){}}function changeValidationEngineMsgPos(a,b){if(hasValue(a)){jQuery("#"+a+"").validationEngine().validationEngine("hide");if(hasValue(b)){jQuery("#"+a+" input").attr("data-prompt-position",b);jQuery("#"+a+" input").data("promptPosition",b);jQuery("#"+a+" textarea").attr("data-prompt-position",b);jQuery("#"+a+" textarea").data("promptPosition",b);jQuery("#"+a+" select").attr("data-prompt-position",b);jQuery("#"+a+" select").data("promptPosition",b);}}}function checkAndReturnEmptyData(a){if(hasValue(a)){return a;}else{return EMPTY_DATA_VAR;}}function getConfirmDeleteText(a){return"Are you sure you want to delete this "+a+" record ?";}var DEFAULT_PAGE_LOWERLIMIT=0;var DEFAULT_PAGE_UPPERLIMIT;var VIEW_DETAIL_SPAN_TH=document.createElement("th");var VIEW_DETAIL_SPAN_TD=document.createElement("td");var detailpng=context+"/images/User/details_open.png";VIEW_DETAIL_SPAN_TD.innerHTML=detailpng;VIEW_DETAIL_SPAN_TD.className="center";var csrfCookiePath="/";var uploadid;var primaryKey;var foreignKey;var uploadName;var upload_div_id;var upid;var richTextVar;var description;var userLanguage="en";var currentDomainId;var tabNameArr=new Array();var myjsonnode;var check_list_view_screen=false;var list_view_callId;var uniqueid;var LOGIN_USER_LANGUAGE="en";var LOGIN_USER_CONFIG_LANGUAGE_JSON;var LOGIN_USER_ID;var check_elastic_view_screen=false;var TodayDate="";var EMPTY_DATA_VAR="-";var DELETE_COMMENT_CONFIRM_MSG_VAR="Are you sure you want to delete this comment ?";var DELETE_ATTACHMENT_CONFIRM_MSG_VAR="Are you sure you want to delete this attachment ?";var TOTAL_COUNT_TEXT_VAR="Total: ";function createTabScreen(a,b){removeAllInstanceOfEditor();check_list_view_screen=true;list_view_callId=b;hasSession();if(checkTab(a)){closeTab(a);addTab(a);onselectHighlight();}else{closeTab(a);addTab(a);onselectHighlight();}showSelectTabHighLight(a);}function addTab(tabId){var tabName="";if(tabId=="emailnotifications"){tabName="Email Notifications";}else{tabName=eval(tabId+"_tab_li_a");}if(tabId!="dashboard"){$('<li><a href="#tab'+tabId+'" id="'+tabId+'" data-toggle="tab" onclick="removeAllInstanceOfEditor()">'+tabName+"<span  onclick=\"closeTab('"+tabId+'\')" ><i class="icon-remove" style="margin-left: 5px;"></i></span></a></li>').appendTo("#tabs");}else{$('<li><a href="#tab'+tabId+'" id="'+tabId+'" data-toggle="tab"  onclick="removeAllInstanceOfEditor()">'+tabName+"</a></li>").appendTo("#tabs");}if(UserLang=="en"){$('<div class="tab-pane" id="tab'+tabId+'"></div>').appendTo("#indextab-content");$("#tab"+tabId+"").load(context+"/pages/"+tabId+".html");$("#tabs #"+tabId+"").tab("show");}if(UserLang=="french"){$('<div class="tab-pane" id="tab'+tabId+'"></div>').appendTo("#indextab-content");$("#tab"+tabId+"").load(context+"/pages_french/"+tabId+".html");$("#tabs #"+tabId+"").tab("show");}if(UserLang=="spanish"){$('<div class="tab-pane" id="tab'+tabId+'"></div>').appendTo("#indextab-content");$("#tab"+tabId+"").load(context+"/pages_spanish/"+tabId+".html");$("#tabs #"+tabId+"").tab("show");}}function checkTab(a){if($("#tabs #"+a+"").length==1){return false;}else{return true;}}function selectTab(a){$("#tabs #"+a+"").tab("show");}function createTab(a){updateRememberMetoken();removeAllInstanceOfEditor();check_list_view_screen=false;hasSession();if(checkTab(a)){addTab(a);onselectHighlight();}else{selectTab(a);}showSelectTabHighLight(a);}function showSelectedTab(a){}function createDashboardTab(){createTab("dashboard");}function createAllNotificationTab(){createTab("notifications");}function createEmailNotificationTab(){createTab("emailnotifications");}function createWorklistTab(){createTab("worklist");}function createAuditTab(){createTab("audit");}function createReportTab(){createTab("report");}function createProfileTab(){createTab("profile");}function createSettingTab(){createTab("settings");}function createAnalyticsTab(){createTab("analytics");}function createUserTab(){createTab("user");}function createRoleTab(){createTab("role");}function createPermissionTab(){createTab("permission");}function closeTab(a){$("#tabs #"+a).remove();$("#tab"+a).remove();$("#breadcrumbs #breadcrumbs_"+a).remove();$("#tab-content #tab-content_"+a).remove();closeTabRemoveHighLight(a);}function closeTabRemoveHighLight(a){$("#"+a+"_tab_btn").removeClass("active");var b="";$("#tabs li").each(function(){if(hasValue($(this).find("a:eq(0)").attr("id"))){b=$(this).find("a:eq(0)").attr("id");}});selectTab(b);showSelectTabHighLight(b);}function showSelectTabHighLight(a){$("#appMenu li").each(function(){var b=$(this).attr("id");if(hasValue(b)){if($("#"+b).hasClass("active")){$("#"+b).removeClass("active");}}});$("#appMenu .nav li").each(function(){if($(this).hasClass("active")){$(this).removeClass("active");$(this).removeClass("open");}});if(a=="user"||a=="role"||a=="permission"){$("#usermanagement_tab_btn").addClass("active");}else{$("#"+a+"_tab_btn").addClass("active");$("#usermanagement_tab_btn").removeClass("active");$("#usermanagement_tab_btn").removeClass("open");}}function onselectHighlight(){$("#tabs li").click(function(){if(hasValue($(this).find("a:eq(0)").attr("id"))){var a=$(this).find("a:eq(0)").attr("id");showSelectTabHighLight(a);}});}var userGridTableRowData;var tableNameVar="Users";var countryNameVar="Users";var randomDbBoxCounter=0;var slider="";var mapboxid="";function formatInCamelString(d){var c=new Array();c=d.split(" ");var e="";var a=c.length;for(i=0;i<c.length;i++){var b=c[i].charAt(0).toUpperCase();e+=b+c[i].substr(1,c[i].length-1).toLowerCase()+" ";}return e.substr(0,e.length-1);}function getArrayFromObject(data,fieldItem){if(data!=null){var arrStr="[";for(var i=0;i<data.length;i++){var value=(parseInt(eval("arguments[0]["+i+"]."+fieldItem)));if(value<0){value=value*-1;}arrStr+=""+value+",";}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="]";return arrStr;}}function getArrayDateFromObject(data,fieldItem){if(data!=null){var arrStr="[";for(var i=0;i<data.length;i++){var value=+eval("arguments[0]["+i+"]."+fieldItem);value='"'+getFormattedDate(new Date(value))+'"';arrStr+=value+",";}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="]";return arrStr;}}function getDbFormattedDate(e,d,g){var f="-";var a=e.getDate();if(a<10){a="0"+a;}var b=getMonthName(e.getMonth());if(d){b=a+f+getMonthName(e.getMonth());}if(g){var c=e.getFullYear();b+=f+c.toString().slice(2);}return b;}function getArrayWeekDateFromObject(data,fieldItem){if(data!=null){var arrStr="[";for(var i=0;i<data.length;i++){var value=+eval("arguments[0]["+i+"]."+fieldItem);value='"'+getDbFormattedDate(new Date(value),true)+'"';arrStr+=value+",";}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="]";return arrStr;}}function getArrayMonthDateFromObject(data,fieldItem){if(data!=null){var arrStr="[";for(var i=0;i<data.length;i++){var value=+eval("arguments[0]["+i+"]."+fieldItem);value='"'+getDbFormattedDate(new Date(value),false,true)+'"';arrStr+=value+",";}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="]";return arrStr;}}function getArrayYearDateFromObject(data,fieldItem){if(data!=null){var arrStr="[";for(var i=0;i<data.length;i++){var value=+eval("arguments[0]["+i+"]."+fieldItem);var dd=new Date(value);value='"'+getDbFormattedDate(dd,false,true)+'"';arrStr+=value+",";}if(arrStr.length>1){arrStr=arrStr.substring(0,arrStr.length-1);}arrStr+="]";return arrStr;}}function getRecentActivityData(){$("#recentActivityDiv").empty();var a=new Date();a=a.getTime();sendGETRequest(context+"/rest/ActivityStream/FIQLsearch?&ulimit=2&llimit=0&orderBy=date&orderType=desc&date="+a,"getRecentActivityDataCallBack","",true);}function getRecentactivitydatafordashboard(){updateRememberMetoken();window.setTimeout(function(){getRecentActivityData();},300);}function getRecentActivityDataCallBack(b,c,a){if(!checkException(b.responseText)){if(b.status==200){setRecentActivityData(c);window.setTimeout("getRecentactivitydatafordashboard()",50000);}}}function setRecentActivityData(b){for(var a=0;a<b.length;a++){generateRecentActivityRowData(b[a]);}}function generateRecentActivityRowData(e){if(hasValue(e)){var a=formatInCamelString(e.user.firstname);var d=formatStreamDate(e.date,true);var c=e.message;var b=e.user.userid;$("#recentActivityDiv").append("<div class='itemdiv commentdiv'><div class='user'><img style='max-height: 34px; width: 40px; height: 40px; border-radius: 50%; overflow: hidden;' alt='"+a+"&#39;s Avatar' src="+context+"/rest/Users/getUserImageById/"+b+" onError=\"this.src='../images/avatar2.png';\" ></div><div class='body'><div class='name'><a href='javascript:void(0)' style='cursor: text;'>"+a+"</a></div><div class='time'><span class='red'> "+d+"</span></div><div class='text' style='word-wrap: break-word;max-width: 72%;'>"+c+"</div></div></div>");}}function formatStreamDate(e,c){var d=formatDateForStream(e);var b=formatDateForStream(new Date());var a=formatDateForStream(getBeforeDate(1));var g=" "+getTimeZone(e);var f="&nbsp;";if(c){f="<br>";}if(d==b){return"<span class='bigger-150 bolder'>Today</span>"+f+getStreamTime(e)+g;}if(d==a){return"<span class='bigger-150 bolder'>Yesterday</span>"+f+getStreamTime(e)+g;}return"<span class='bigger-150 bolder'>"+getFormattedDate(new Date(e))+"</span>"+f+getStreamTime(e)+g;}function formatDateForStream(b){if(hasValue(b)){var a=new Date(b);return getFormattedDate(a,"-",true);}return"-";}function getTimeZone(a){var h=new Date(a);var c=h.toLocaleString();var f=/\b(ACDT|ACST|ACT|ADT|AEDT|AEST|AFT|AKDT|AKST|AMST|AMT|ART|AST|AWDT|AWST|AZOST|AZT|BDT|BIOT|BIT|BOT|BRT|BST|BTT|CAT|CCT|CDT|CEDT|CEST|CET|CHADT|CHAST|CIST|CKT|CLST|CLT|COST|COT|CST|CT|CVT|CXT|CHST|DFT|EAST|EAT|ECT|EDT|EEDT|EEST|EET|EST|FJT|FKST|FKT|GALT|GET|GFT|GILT|GIT|GMT|GST|GYT|HADT|HAEC|HAST|HKT|HMT|HST|ICT|IDT|IRKT|IRST|IST|JST|KRAT|KST|LHST|LINT|MART|MAGT|MDT|MET|MEST|MIT|MSD|MSK|MST|MUT|MYT|NDT|NFT|NPT|NST|NT|NZDT|NZST|OMST|PDT|PETT|PHOT|PKT|PST|RET|SAMT|SAST|SBT|SCT|SGT|SLT|SST|TAHT|THA|UYST|UYT|VET|VLAT|WAT|WEDT|WEST|WET|WST|YAKT|YEKT)\b/gi;var b={"UTC+0":"GMT","UTC+1":"CET","UTC+2":"EET","UTC+3":"EEDT","UTC+3.5":"IRST","UTC+4":"MSD","UTC+4.5":"AFT","UTC+5":"PKT","UTC+5.5":"IST","UTC+6":"BST","UTC+6.5":"MST","UTC+7":"THA","UTC+8":"AWST","UTC+9":"AWDT","UTC+9.5":"ACST","UTC+10":"AEST","UTC+10.5":"ACDT","UTC+11":"AEDT","UTC+11.5":"NFT","UTC+12":"NZST","UTC-1":"AZOST","UTC-2":"GST","UTC-3":"BRT","UTC-3.5":"NST","UTC-4":"CLT","UTC-4.5":"VET","UTC-5":"EST","UTC-6":"CST","UTC-7":"MST","UTC-8":"PST","UTC-9":"AKST","UTC-9.5":"MIT","UTC-10":"HST","UTC-11":"SST","UTC-12":"BIT"};var e=c.match(f);if(e){e=e[e.length-1];}else{var g=-1*h.getTimezoneOffset()/60;g="UTC"+(g>=0?"+"+g:g);e=b[g];}return e;}function getStreamTime(f){var b=new Date(f);var a=b.getHours()<10?"0"+b.getHours():b.getHours();var c=b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes();var d=b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds();var e=a;var h="";var g=e+":"+c;return g;}function getFormattedDate(d,e,f){if(!hasValue(e)){e="-";}var a=d.getDate();if(a<10){a="0"+a;}var b=a+e+getMonthName(d.getMonth());if(f){var c=d.getFullYear();b+=e+c.toString().slice(2);}return b;}function getMonthName(b){var a="Unknown";switch(b){case 0:a="Jan";break;case 1:a="Feb";break;case 2:a="Mar";break;case 3:a="Apr";break;case 4:a="May";break;case 5:a="Jun";break;case 6:a="Jul";break;case 7:a="Aug";break;case 8:a="Sep";break;case 9:a="Oct";break;case 10:a="Nov";break;case 11:a="Dec";break;}return a;}function generateDbPieChart(data,boxId){if(hasValue(data)){var isLabel=true;if($(document).width()<480){isLabel=false;}var newDataArray="[";var chartlabel="-";for(var i=0;i<data.length;i++){chartlabel=data[0].label;newDataArray+='["'+data[i].status+'",'+data[i].count+"],";}newDataArray=newDataArray.substring(0,newDataArray.length-1);newDataArray=newDataArray+"]";if(newDataArray!="]"){newDataArray=eval(newDataArray);}var chart=new Highcharts.Chart({chart:{renderTo:boxId+"_chart",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false},exporting:{enabled:false},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>",percentageDecimals:0},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",center:[150,80],colors:["#4E9EA5","#FFDE94","#485792","#9C4EA5","#61AD00","#318031","#89A54E","#AA4643","#4572A7","#80699B"],dataLabels:{enabled:false,color:"white",distance:-15,formatter:function(){return parseInt(this.percentage)+"%";}},showInLegend:isLabel},},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"right",borderColor:"#ffffff",verticalAlign:"top",floating:true,x:-90,y:40,itemStyle:{paddingBottom:"5px"},enabled:isLabel},series:[{type:"pie",name:chartlabel,data:newDataArray}]});data[0].label=htmlDecode(data[0].label);$("#"+boxId+"_label").html(data[0].label);}}function generateDbDonutChart(data,boxId){if(hasValue(data)){var isLabel=true;if($(document).width()<480){isLabel=false;}var newDataArray="[";var chartlabel;for(var i=0;i<data.length;i++){chartlabel=data[0].label;newDataArray+='["'+data[i].status+'",'+data[i].count+"],";}newDataArray=newDataArray.substring(0,newDataArray.length-1);newDataArray=newDataArray+"]";if(newDataArray!="]"){newDataArray=eval(newDataArray);}var chart=new Highcharts.Chart({chart:{renderTo:boxId+"_chart",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false},exporting:{enabled:false},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>",percentageDecimals:0},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",center:[150,80],colors:["#80699B","#4572A7","#AA4643","#89A54E","#FF8F00","#61AD00","#9C4EA5","#485792","#FFDE94","#4E9EA5"],dataLabels:{enabled:false,color:"white",distance:-15,formatter:function(){return parseInt(this.percentage)+"%";}},showInLegend:true}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"right",borderColor:"#ffffff",verticalAlign:"top",floating:true,x:-90,y:40,itemStyle:{paddingBottom:"5px"},enabled:isLabel},series:[{type:"pie",innerSize:"60%",name:chartlabel,data:newDataArray}]});chartlabel=htmlDecode(chartlabel);$("#"+boxId+"_label").text(chartlabel);}}function getDbTrendChart(a,d,b){var e=d.split("#");var c=e[0];d=c+"#"+b;sendGETRequest(context+"/rest"+a+"trend="+b,"getDbTrendChartCallBack",d);}function getDbTrendChartCallBack(c,e,a,f){if(!checkException(c.responseText)){if(c.status==200){var g=f.split("#");var d=g[0];var b=g[1];generateDbTrendChart(e,b,d);}}}function generateDbTrendChart(chartData,type,boxId){if(hasValue(chartData)){var data=chartData.data;var xAxisLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.xtitle);var yAxisLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.ytitle);var chartLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.chartTitle);var avgData=new Array();var countData=new Array();var sumData=new Array();var dateData=new Array();var avgData=eval(getArrayFromObject(data,"avg"));var countData=eval(getArrayFromObject(data,"count"));var sumData=eval(getArrayFromObject(data,"sum"));if(type=="week"){dateData=eval(getArrayWeekDateFromObject(data,"date"));}if(type=="month"){dateData=eval(getArrayMonthDateFromObject(data,"date"));}if(type=="year"){dateData=eval(getArrayYearDateFromObject(data,"date"));}var step=2;if(dateData.length>50){step=5;}var chart=new Highcharts.Chart({chart:{renderTo:boxId+"_chart"},exporting:{enabled:false},title:{text:"",x:-2},xAxis:{categories:dateData,labels:{step:step,rotation:270,y:25}},plotOptions:{series:{marker:{enabled:false}}},yAxis:{min:0,title:{text:yAxisLabel,allowDecimals:false}},series:[{name:"Average",data:avgData},{name:"Sum",data:sumData},{name:"Count",data:countData}]});chartLabel=htmlDecode(chartLabel);$("#"+boxId+"_label").text(chartLabel+" Trends");}}function getNameArray(c){var a=new Array();for(var b=0;b<c.length;b++){a.push(c[b].name);}return a;}function generateDbBarChart(chartData,boxId){if(hasValue(chartData)){var isLabel=true;if($(document).width()<480){isLabel=false;}var data=chartData.data;var xAxisLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.xtitle);var yAxisLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.ytitle);var chartLabel=makeFirstLetterUpperCaseAndRemoveUnderscore(chartData.chartTitle);var nameData=new Array();var countData=new Array();nameData=getNameArray(data);countData=eval(getArrayFromObject(data,"count"));var ci=0;var countObj=new Array();for(var k=0;k<countData.length;k++){var color=["#80699B","#4572A7","#AA4643","#89A54E","#FF8F00","#61AD00","#9C4EA5","#485792","#FFDE94","#4E9EA5"];if(k%10==0&&k!=0){ci=0;}countObj.push({y:countData[k],color:color[ci]});ci=ci+1;}var chart=new Highcharts.Chart({chart:{renderTo:boxId+"_chart",type:"bar",marginRight:130},exporting:{enabled:false},title:{text:""},xAxis:{categories:nameData,allowDecimals:false},plotOptions:{series:{marker:{enabled:false}}},yAxis:{min:0,title:{text:xAxisLabel}},legend:{backgroundColor:"#FFFFFF",reversed:true,enabled:isLabel},tooltip:{formatter:function(){return""+this.series.name+": "+this.y+"";}},plotOptions:{series:{stacking:"normal"}},series:[{name:yAxisLabel,data:countObj}]});chartLabel=htmlDecode(chartLabel);$("#"+boxId+"_label").text(chartLabel);}}function userGridViewTable(b){$("#"+b+"_chart").html('<table  cellpadding="0"  cellspacing="0" border="0" class="display mytb table" id="DbviewUserGrid"></table>');$("#"+b+"_label").text("Users");var c=380;var a=$("#DbviewUserGrid").dataTable({bFilter:false,bAutoWidth:true,aaData:userGridTableRowData,bPaginate:false,bJQueryUI:true,sDom:"Rlftrip",aaSorting:[[1,"asc"]],aoColumns:[{sTitle:"Firstname",mData:"firstname",mRender:function(f,e,d){return formatInCamelString(f);}},{sTitle:"Email",mData:"email",},{sTitle:"Locked",mData:"lockStatus",sClass:"text-center",bSortable:false,mRender:function(f,e,d){if(f==false||f=="false"||f==EMPTY_DATA_VAR){return"<div>"+getCustomImage("unlockNw.png","Unlocked","","20","")+"</div>";}else{return"<div>"+getCustomImage("lockedNw.png","Locked","","20","")+"</div>";}return f;}},{sTitle:"Status",sClass:"text-center",mData:"enabled",mRender:function(f,e,d){if(f==true){statuschecked="Disable";return"<div>"+getCustomImage("user_Enabled.png","Enabled","","20","")+"</div>";}else{statuschecked="Enable";return"<div>"+getCustomImage("user_Disabled.png","Disabled","","20","")+"</div>";}return f;}},{sTitle:"Action",sClass:"text-center",mData:"enabled",mRender:function(f,e,d){return'<div class="pull-rightaction-buttons"><span class="vbar"></span><a href="#Reset_password_Db_modal" data-toggle="modal" class="<!--red--> tooltipdash" title="Reset Password" id="reset_password_act_dash"><!--<i class="icon-key bigger-130"></i>-->'+getCustomImage("resetpassnew.png","Reset Password","","20","")+'</a>&nbsp;<a href="#Update_Role_Db_Modal" id="update_role_dashboard"  data-toggle="modal" class="green tooltipdash" title="Update Roles"><!--<i class="icon-user-lineart bigger-130"></i>--> '+getCustomImage("update-role.png","Update Role","","20","")+"</a></div>";}}]});$("#DbviewUserGrid tbody tr td #update_role_dashboard").live("click",function(){var f=$(this).closest("tr").get(0);var d=a.fnGetPosition(f);var e=a.fnGetData(d);show_modal_window_Db(e.userid,"userupdateroledash.html");});$("#DbviewUserGrid tbody tr td #reset_password_act_dash").live("click",function(){var f=$(this).closest("tr").get(0);var d=a.fnGetPosition(f);var e=a.fnGetData(d);show_modal_window_reset_Db(e.userid,"resetpassworddash.html");});$("#DbviewUserGrid tbody tr td #edit_user_act_dash").live("click",function(){var f=$(this).closest("tr").get(0);var d=a.fnGetPosition(f);var e=a.fnGetData(d);show_modal_window_edit_Db(e,"edituserdash.html");});}var useridDb;function show_modal_window_Db(c,b){useridDb=c;var a=context+"/pages/"+b;$.get(a,function(d){$("#User_Role_Db_modal").html(d);});}var resetUserIdDb;var jsdata;function show_modal_window_reset_Db(c,b){resetUserIdDb=c;var a=context+"/pages/"+b;$.get(a,function(d){$("#Reset_password_db").html(d);});}function show_modal_window_edit_Db(c,b){jsdata=c;var a=context+"/pages/"+b;$.get(a,function(d){$("#edit_user_db").html(d);});}function getKeyById(a,c){for(var b=0;b<a.length;b++){if(a[b].id==c){return a[b];}}return"";}function getDashboardPortalDataArr(){var d=getCookie();if(hasValue(d)){var b=d.split(",");var a=new Array();checkStaticChartInAddWidget(b);for(var c=0;c<b.length;c++){a.push(getKeyById(dashboardChartData,b[c]));}return a;}return dashboardChartData;}function getDashboardTopwidgetPortalDataArr(){var e=getCookie();if(hasValue(e)){var c=e.split(",");var a=new Array();var b=checkChartInTopWidget(c);for(var d=0;d<b.length;d++){a.push(getKeyById(dashboardChartData,b[d]));}return a;}}var DashboardCloseBoxId=new Array();function checkStaticChartInAddWidget(IdArr){var dashIds=new Array();dashIds=eval(getArrayFromObject(dashboardChartData,"id"));var diffIds=getDiffFromArrayForDbBox(dashIds,IdArr);DashboardCloseBoxId=diffIds;}function checkChartInTopWidget(IdArr){var dashIds=new Array();dashIds=eval(getArrayFromObject(dashboardChartData,"id"));var diffIds=getDiffFromArrayForDbBox(dashIds,IdArr);return diffIds;}function getDiffFromArrayForDbBox(b,a){var d=new Array();for(var c=0;c<b.length;c++){if(!checkValueInArr(a,b[c])){d.push(b[c]);}}return d;}function checkValueInArr(a,c){for(var b=0;b<a.length;b++){if(a[b]==c){return true;}}return false;}function loadDashboardPortlet(){var arr=getDashboardPortalDataArr();var toparr=getDashboardTopwidgetPortalDataArr();if(hasValue(toparr)){for(var i=0;i<arr.length;i++){var element=arr[i];var permission=element.permission;if(hasValue(permission)){if(eval(permission)){if(element.type=="line"){var url=element.url+"?trend=week";getDashBoardWidget(url,element.type,element.id);}else{getDashBoardWidget(element.url,element.type,element.id);}}}else{if(usermgmt){getDashBoardWidget(element.url,"users","3");}}}loadDashboardTopWidgetPortal();}else{var chartRefId="";for(var i=0;i<(arr.length-2);i++){chartRefId+=arr[i].id+",";}if(chartRefId.length>1){chartRefId=chartRefId.substring(0,chartRefId.length-1);}setCookie("portal-state",chartRefId,7);loadDashboardPortlet();}}function loadDashboardTopWidgetPortal(){var arr=getDashboardTopwidgetPortalDataArr();for(var i=0;i<arr.length;i++){var element=arr[i];var permission=element.permission;if(hasValue(permission)){if(eval(permission)){if(element.type=="line"){var url=element.url+"?trend=week";getDashBoardTopWidget(url,element.type,element.id);}else{getDashBoardTopWidget(element.url,element.type,element.id);}}}else{if(usermgmt){getDashBoardTopWidget(element.url,"users","3");}}}window.setTimeout(function(){slider=$(".slider3").bxSlider({mode1:"fade",slideWidth:580,minSlides:1,slideMargin:10,infiniteLoop:false,hideControlOnEnd:true});},500);changeHeaderColor();}function loadDashboardTopWidgetPortalWithoutSlide(){var arr=getDashboardTopwidgetPortalDataArr();for(var i=0;i<arr.length;i++){var element=arr[i];var permission=element.permission;if(hasValue(permission)){if(eval(permission)){if(element.type=="line"){var url=element.url+"?trend=week";getDashBoardTopWidget(url,element.type,element.id);}else{getDashBoardTopWidget(element.url,element.type,element.id);}}}else{if(usermgmt){getDashBoardTopWidget(element.url,"users","3");}}}window.setTimeout(function(){slider.reloadSlider();},500);}function getLineChartHTML(c,a,d,b){return"<div id='"+c+"' class='dbportlet ca-item ca-item-1 slide'><div class='widget-box transparent'><div class='widget-header'><h4 refId='"+b+"' class='lighter' id='"+c+"_label'></h4><div class='widget-toolbar no-border'><button onclick='getDbTrendChart(&quot;"+a+"&quot;,&quot;"+d+"&quot;,&quot;week&quot;); selectButtonDashboard("+c+",this);' class='btn btn-minier btn-grey' id='week'>Weekly</button><button id='month' onclick='getDbTrendChart(&quot;"+a+"&quot;,&quot;"+d+"&quot;,&quot;month&quot;); selectButtonDashboard("+c+",this);' class='btn btn-minier btn-primary'>Monthly</button><button onclick='getDbTrendChart(&quot;"+a+"&quot;,&quot;"+d+"&quot;,&quot;year&quot;);selectButtonDashboard("+c+",this);' class='btn btn-minier btn-primary'  id='year'>Yearly</button></div><div class='widget-toolbar no-border'></div></div><div class='widget-body dashBoardLineChart' id='"+c+"_chart' style='height: 245px;'><div style='height:200px;' class='widget-main padding-6'></div></div></div></div>";}function getRecentActivityHTML(b,a){return"<div id='"+b+"' class='dbportlet ca-item ca-item-1 slide'><div class='widget-box transparent'><div class='widget-header'><h4 refId='"+a+"' class='lighter' id='"+b+"_label'></h4><div class='widget-toolbar no-border'></a></div></div><div class='widget-body' id='"+b+"_chart' style='height:245px;'><div style='height:200px;' class='widget-main padding-6'><div class='comments' id='recentActivityDiv' style='overflow: hidden; width: auto; height: 230px;'></div></div></div></div>";}function getGoogleMapHTML(b,a){mapboxid=b+"_label";return"<div id='"+b+"'  class='dbportlet ca-item ca-item-1 slide'><div id='dbRow1_1'><div class='widget-box transparent'><div class='widget-header'><h4 refId='"+a+"' class='lighter' id='"+b+"_label'>Users Map</h4><div class='widget-toolbar no-border'><div class='btn-group'><button data-toggle='dropdown' class='btn  btn-grey btn-mini dropdown-toggle'>Type<i class='icon-angle-down icon-on-right'></i></button><ul id='dbCountryValue' class='dropdown-menu dropdown-inverse pull-right'></ul></div><div class='btn-group'><button data-toggle='dropdown' class='btn btn-primary btn-mini dropdown-toggle'>Country<i class='icon-angle-down icon-on-right'></i></button><ul id='dbCountryList' class='dropdown-menu dropdown-inverse pull-right'></ul></div></div><div class='widget-toolbar no-border'></div></div><div class='widget-body'style='height: 245px;'><div class='widget-main padding-6'><div style='overflow: hidden; width: auto; height: 230px;' id='map_addresses' class='map'><p>This will be replaced with the Google Map.</p></div></div></div></div></div></div>";}function getOtherBoxHTML(b,a){return"<div id='"+b+"' class='dbportlet ca-item ca-item-1 slide'><div class='widget-box transparent'><div class='widget-header'><h4 class='lighter' refId='"+a+"' id='"+b+"_label'></h4><div class='widget-toolbar no-border'></div></div><div class='widget-body dashBoardChart' id='"+b+"_chart' ><div style='height:200px;' class='widget-main padding-6'></div></div></div></div>";}function getDashBoardWidget(a,b,c){addStaticDbChart("DashboardDragParentDiv",a,b,c);}function getDashBoardTopWidget(a,b,c){addStaticDbChart("topwidgetsDiv",a,b,c);}function addStaticDbChart(f,a,b,d){randomDbBoxCounter=randomDbBoxCounter+1;var c=f+randomDbBoxCounter;var g=c+"#"+b;var h=a;if(b=="line"){var e=h.split("?");urlButton=e[0]+"?";$("#"+f).append(getLineChartHTML(c,urlButton,g,d));}if(b=="recent"){$("#"+f).append(getRecentActivityHTML(c,d));$("#"+c+"_label").text("Recent Activity");}if(b!="recent"&&b!="line"&&b!="google"){$("#"+f).append(getOtherBoxHTML(c,d));}if(b=="google"){$("#"+f).append(getGoogleMapHTML(c,d));}sendGETRequest(context+"/rest"+a,"addStaticDbChartCallback",g);}function addStaticDbChartCallback(c,e,a,f){if(!checkException(c.responseText)){if(c.status==200){var g=f.split("#");var d=g[0];var b=g[1];if(b=="google"){generateDropdowntable(e);}if(b=="pie"){generateDbPieChart(e,d);}if(b=="donut"){generateDbDonutChart(e,d);}if(b=="line"){generateDbTrendChart(e,"week",d);}if(b=="bar"){generateDbBarChart(e,d);}if(b=="recent"){generateDbRecentActivtyData(e);}if(b=="users"){userGridTableRowData=e;userGridViewTable(d);}enableDashbaordDragAndDrop();}}}function generateDbRecentActivtyData(a){setRecentActivityData(a);window.setTimeout("getRecentactivitydatafordashboard()",50000);}function addWidgetInDashboard(b,a){addChartInRow("DashboardDragParentDiv",b,a);$("#db_static_li_"+b).css("display","none");}function showStaticChartInLiAgain(a){$("#db_static_li_"+a).css("display","");}function addChartInRow(b,d,c){var a=b+"_2";$("#"+b).append("<div id='"+a+"' class='dbportlet ca-item ca-item-1 slide'><div class='widget-box transparent'><div class='widget-header'><h4 class='lighter'>"+c+"</h4><div class='widget-toolbar no-border'><a href='javascript:void(0)' onclick='showStaticChartInLiAgain("+d+")' data-action='close'><i class='icon-remove'></i></a></div></div><div id='"+a+"_dyna_chart' class='widget-body'><div style='220px' class='widget-main padding-6'></div></div></div></div>");getDbChartData(d,a);}function getDbChartDataGenerated(c,b){var a=getChartURLById(c);sendGETRequest(context+"/rest/Dashboard/"+a,"getDbChartDataCallback",b);}function addValuesInWidgetDropDown(){$("#addWidgetValue").empty();var data=new Array();if(DashboardCloseBoxId.length>0){for(var k=0;k<DashboardCloseBoxId.length;k++){var element=getKeyById(dashboardChartData,DashboardCloseBoxId[k]);if(hasValue(element.permission)){if(eval(element.permission)){$("#addWidgetValue").append("<li><a title='"+element.title+"' href='javascript:openStaticDbChartFromDb("+DashboardCloseBoxId[k]+")'>"+replaceUnderscore(formatName(element.title,30))+"</a></li>");}}else{if(usermgmt){$("#addWidgetValue").append("<li><a title='"+element.title+"' href='javascript:openStaticDbChartFromDb("+DashboardCloseBoxId[k]+")'>"+replaceUnderscore(formatName(element.title,30))+"</a></li>");}}}}if(data.length>0){for(var i=0;i<data.length;i++){var row=data[i];var chartId=row.id;var chartTitle=row.title;var liId="db_static_li_"+chartId;$("#addWidgetValue").append("<li id='"+liId+"'><a title='"+chartTitle+"' href='javascript:addWidgetInDashboard("+chartId+',"'+chartTitle+"\")'>"+replaceUnderscore(formatName(chartTitle,30))+"</a></li>");}}else{$("#dashboard_nav_search").css("display","block");}if(DashboardCloseBoxId.length<=0&&data.length<=0){$("#addWidgetValue").append("<li><a >No widgets available</a></li>");}}function openStaticDbChartFromDb(c){var b=getKeyById(dashboardChartData,c);if(b.type=="line"){var a=b.url+"?trend=week";getDashBoardWidget(a,b.type,b.id);}else{getDashBoardWidget(b.url,b.type,b.id);}getDashboardUIBoxOrder();$("#DashboardDragParentDiv").empty();loadDashboardPortlet();addValuesInWidgetDropDown();}function getChartURLById(d){var b=chartMeta;for(var a=0;a<b.length;a++){var c=b[a];if(d==c.id){return c.url;}}return"";}function getDbChartData(c,b){var a=getChartURLById(c);sendGETRequest(a,"getDbChartDataCallback",b);}function getDbChartDataCallback(b,d,a,c){if(!checkException(b.responseText)){if(b.status==200){$("#"+c+"_dyna_chart").append(d);enableDashbaordDragAndDrop();}}}function formatName(b,a){if(!hasValue(a)){a=60;}var c="";if(hasValue(b)){if(b.length>a){c=b.substring(0,a-3)+"...";}else{c=b;}return c;}return b;}var tableNameforDbDropDown=new Array();var countryNameforDbDropDown=new Array();function getUserCountryForChartCallBack(b,c,a){if(!checkException(b.responseText)){if(b.status==200){generateDropdowntable(c);}}}function generateDropdowncountry(c){var b=new Array();for(var a=0;a<c.length;a++){if(!(tableNameVar=="Users")){if(hasValue(c[a].address)){var d=c[a].address.country;d=d.toUpperCase();b.push(d);}}else{if(hasValue(c[a].userAddress)){var d=c[a].userAddress.country;d=d.toUpperCase();b.push(d);}}}countryNameforDbDropDown=_.uniq(b.sort());setcountryDropdownValue();}function generateDropdowntable(c){var b=new Array();for(var a=0;a<addressFields.length;a++){b.push(addressFields[a]);}tableNameforDbDropDown=_.uniq(b);settableDropdownValue();generateDropdowncountry(c);getUserByTable(tableNameforDbDropDown[0]);tableNameforDbDropDown[0]=htmlDecode(tableNameforDbDropDown[0]);$("#"+mapboxid).text(formatInCamelString(tableNameforDbDropDown[0])+" Map");}function settableDropdownValue(){var b=tableNameforDbDropDown;$("#dbCountryValue").empty();for(var a=0;a<b.length;a++){$("#dbCountryValue").append("<li><a href='javascript:getUserByTable(\""+b[a]+"\")'onclick='setTableNameInVar(\""+b[a]+"\")'>"+b[a]+"</a></li>");}}function setcountryDropdownValue(){var b=countryNameforDbDropDown;$("#dbCountryList").empty();for(var a=0;a<b.length;a++){$("#dbCountryList").append("<li><a href='javascript:getUserByCountry(\""+b[a]+"\")'onclick='setcountryNameInVar(\""+b[a]+"\")'>"+b[a]+"</a></li>");}$("#dbCountryList").css("max-height","250px");$("#dbCountryList").css("overflow-y","auto");}function setcountryNameInVar(a){countryNameVar=a;}function setTableNameInVar(a){tableNameVar=a;}function getUserByTable(a){$("#"+mapboxid).text(formatInCamelString(a)+" Map");sendGETRequest(context+"/rest/"+a+"/search?&ulimit=1000&llimit=0","getUserByTableCallBack","");}function getUserByCountry(a){$("#"+mapboxid).text(formatInCamelString(tableNameVar)+" Map");$("#countryListbrdcumb").text(formatInCamelString(a));if(hasValue(currentDomainId)){if(!(tableNameVar=="Users")){sendGETRequest(context+"/rest/"+tableNameVar+"/search?_s=address.country=="+a+";domain.domainid=="+currentDomainId+"&orderBy=modifiedTime&orderType=desc&ulimit=1000&llimit=0","getUserByCountryCallBack","");}else{sendGETRequest(context+"/rest/"+tableNameVar+"/search?_s=userAddress.country=="+a+";domain.domainid=="+currentDomainId+"&orderBy=modifiedTime&orderType=desc&ulimit=1000&llimit=0","getUserByCountryCallBack","");}}else{if(!(tableNameVar=="Users")){sendGETRequest(context+"/rest/"+tableNameVar+"/search?_s=address.country=="+a+"&orderBy=modifiedTime&orderType=desc&ulimit=1000&llimit=0","getUserByCountryCallBack","");}else{sendGETRequest(context+"/rest/"+tableNameVar+"/search?_s=userAddress.country=="+a+"&orderBy=modifiedTime&orderType=desc&ulimit=1000&llimit=0","getUserByCountryCallBack","");}}}function getUserByTableCallBack(b,d,a){if(!checkException(b.responseText)){if(b.status==200){var c=formatGoogleChartData(d);setDbGoogleMap(c);generateDropdowncountry(d);}}}function getUserByCountryCallBack(b,d,a){if(!checkException(b.responseText)){if(b.status==200){var c=formatGoogleChartData(d);setDbGoogleMap(c);}}}function formatGoogleChartData(c){var a=new Array();for(var b=0;b<c.length;b++){var d=c[b];var e="";if(!(tableNameVar=="Users")){if(hasValue(d.address)){if(hasValue(d.address.city)){e=e+" "+d.address.city;}if(hasValue(d.address.zip)){e=e+" "+d.address.zip;}if(hasValue(d.address.country)){e=e+" "+d.address.country;}}}else{if(hasValue(d.userAddress)){if(hasValue(d.userAddress.city)){e=e+" "+d.userAddress.city;}if(hasValue(d.userAddress.zip)){e=e+" "+d.userAddress.zip;}if(hasValue(d.userAddress.country)){e=e+" "+d.userAddress.country;}}}a.push({address:e,html:d.customerName});}return a;}function setDbGoogleMap(a){$("#map_addresses").empty();$("#map_addresses").gMap({zoom:5,markers:a});}function enableDashbaordDragAndDrop(){$(".dashboardColumn").sortable({connectWith:".dashboardColumn",update:function(a,b){changeHeaderColor();getDashboardUIBoxOrder();}});$(".dashboardColumn").disableSelection();}function getDashboardUIBoxOrder(){$("#displayMessage").empty("");var a=new Array();var c="";$("#DashboardDragParentDiv .lighter").each(function(){var d=$(this).attr("refId");if(hasValue(d)){c+=d+",";}});if(c.length>1){c=c.substring(0,c.length-1);}if(hasValue(c)){setCookie("portal-state",c,7);}if($(".bx-wrapper").is(":visible")){slider.reloadSlider();}var b=getDashboardTopwidgetPortalDataArr();if(!(hasValue(b))){appenddefaultChartTopWidgets();}if(!view_recent_activity_permission&&b.length==3){appenddefaultChartTopWidgets();}}function appenddefaultChartTopWidgets(){$(".bx-wrapper").css("width","50%");$("#displayMessage").empty("");$("#displayMessage").append("No widgets available");$(".bx-next").css("display","none");$("#displayMessage").css("width","280px");}function checkCookie(){if(hasValue(getCookie())){}else{setCookie("portal-state",getDbDefaultCookieValue(),7);}}function getDbDefaultCookieValue(){if(dashboardChartData.length>0){cookValue="";for(var a=0;a<dashboardChartData.length;a++){cookValue+=dashboardChartData[a].id+",";}if(cookValue.length>1){cookValue=cookValue.substring(0,cookValue.length-1);}return cookValue;}return"";}function getCookie(){var b=document.cookie;if(hasValue(b)){return getCookieValue("portal-state");}return"";}function setCookie(a,d,b){var e=new Date();e.setDate(e.getDate()+b);var c=escape(d)+((b==null)?"":"; expires="+e.toUTCString());document.cookie=a+"="+c;}function closePortal(e,c){var b=getCookie();if(hasValue(b)){var d=c.id;var a=d.split("Div");if(a[0]=="DashboardDragParent"){removeIdFromCookieOfCloseBox(e);$("#DashboardDragParentDiv").empty();$("#topwidgetsDiv").empty();loadDashboardPortlet();loadDashboardTopWidgetPortalWithoutSlide();}else{removeIdFromCookieOfCloseBoxAddBottom(e);$("#DashboardDragParentDiv").empty();$("#topwidgetsDiv").empty();loadDashboardPortlet();loadDashboardTopWidgetPortalWithoutSlide();}}}function removeIdFromCookieOfCloseBoxAddBottom(b){var a="";$("#DashboardDragParentDiv .lighter").each(function(){var c=$(this).attr("refId");if(hasValue(c)&&c!=b){a+=c+",";}});a+=b;if(hasValue(a)){setCookie("portal-state",a,7);}}function removeIdFromCookieOfCloseBox(b){var a="";$("#DashboardDragParentDiv .lighter").each(function(){var c=$(this).attr("refId");if(hasValue(c)&&c!=b){a+=c+",";}});if(a.length>1){a=a.substring(0,a.length-1);}if(hasValue(a)){setCookie("portal-state",a,7);}}function toogleDbAddWidget(){$("#displayMessage").slideToggle(1000);$(".bx-wrapper").slideToggle(1000);}function changeHeaderColor(){$("#DashboardDragParentDiv .widget-header").each(function(){$(this).css("color","#4D4D4D").css("background-color","#E0E0E0");});$("#DashboardDragParentDiv .widget-box").each(function(){$(this).css("border","1px solid #ddd");});}function selectButtonDashboard(b,a){$("#"+b.id).find(".btn").each(function(){if(a.id==this.id){if($("#"+a.id).hasClass("btn-primary")){$("#"+a.id).removeClass("btn-primary");$("#"+a.id).addClass("btn-grey");}}else{$(this).removeClass("btn-grey");$(this).addClass("btn-primary");}});}var emailNotificationTableRowData="";var emailNotificationsTable;var nEditing=null;var nRow;var primary;var uperLimit=9;function refreshAllEmailList(){showRegularLoading();$("#email_pagination_next").css("display","");$("#email_pagination_pre").css("display","");uperLimit=eval($("#email_pagination_value").val());$("#email_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit)+" "+pagination_entries+" ");if(hasValue(currentDomainId)){sendGETRequest(context+"/rest/EmailNotifications/FIQLsearch?_s=domain.domainid=="+currentDomainId+"&ulimit="+uperLimit+"&date="+new Date()+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=createdDate&orderType=desc","getEmailNotificationData","");}else{sendGETRequest(context+"/rest/EmailNotifications/FIQLsearch?&ulimit="+uperLimit+"&date="+new Date()+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=createdDate&orderType=desc","getEmailNotificationData","");}}function getEmailNotificationTotalCount(){sendGETRequest(context+"/rest/EmailNotifications/totalCount?date="+new Date(),"getEmailNotificationsTotalCountCallBack","");}function getEmailNotificationsTotalCountCallBack(b,c,a){if(statuscheck(b.status,"request")){if(!checkException(b.responseText)){if(b.status==200){$("#emailnotification_totalCount").html(c);}else{alert("error in data");}}}}function getEmailNotificationData(b,c,a){if(!checkException(b.responseText)){if(b.status==200){getEmailNotificationTotalCount();emailNotificationTableRowData=c;emailNotificationflag=emailNotificationTableRowData.length;EmailNotificationsflag=emailNotificationflag;fiqlEmailNotificationsParam="FIQLsearch?_s=email=="+encodeURIComponent(email);emailNotificationsViewTable();$("#emailNotification_pagination_totalRecord").text(TOTAL_COUNT_TEXT_VAR);}else{showCenteredLoading("error in data");}}}function emailNotificationsViewTable(){$("#email_notifications_grid").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="email_notifications_grid_view"></table>');var a=430;emailNotificationsTable=jQuery("#email_notifications_grid_view").dataTable({bFilter:false,bAutoWidth:false,aoColumns:[{sWidth:"100%"},{sWidth:"10%"},{sWidth:"10%"}],aaData:emailNotificationTableRowData,bLengthChange:false,bPaginate:false,sScrollY:a,bJQueryUI:true,sDom:"Rlftrip",bLengthChange:false,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:emailnotifications_thead_subject,mData:"subject"},{sTitle:emailnotifications_thead_sentby,mData:"sentBy"},{sTitle:emailnotifications_thead_createdtime,mData:"createdDate",mRender:convertTimeStamp2Date}]});$("#email_notifications_grid_view tbody tr td").live("hover",function(b){$("td").removeAttr("id","tooltip");if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}});RemoveUniqueLoading();}function refreshEmailListFromPaginator(){showRegularLoading();$("#emailpagenovalue").html(1);$("#email_pagination_next").css("display","");$("#email_pagination_pre").css("display","");var uperLimit=eval($("#email_pagination_value").val());$("#email_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit)+" "+pagination_entries+" ");if(hasValue(currentDomainId)){sendGETRequest(context+"/rest/EmailNotifications/FIQLsearch?_s=domain.domainid=="+currentDomainId+"&ulimit="+(uperLimit-1)+"&date="+new Date()+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=createdDate&orderType=desc","getEmailNotificationData","");}else{sendGETRequest(context+"/rest/EmailNotifications/FIQLsearch?&ulimit="+(uperLimit-1)+"&date="+new Date()+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=createdDate&orderType=desc","getEmailNotificationData","");}}var notificationTableRowData="";var notificationsTable;var nEditing=null;var nRow;var primary;var uperLimit=9;function refreshAllNotificationList(){showRegularLoading();$("#notification_pagination_next").css("display","");$("#notification_pagination_pre").css("display","");uperLimit=eval($("#notification_pagination_value").val());$("#notification_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit)+" "+pagination_entries+" ");if(hasValue(currentDomainId)){sendGETRequest(context+"/rest/ActivityStream/FIQLsearch?_s=domain.domainid="+currentDomainId+"&date="+new Date()+"&ulimit="+uperLimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=date&orderType=desc","getNotificationData","");}else{sendGETRequest(context+"/rest/ActivityStream/FIQLsearch?date="+new Date()+"&ulimit="+uperLimit+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&orderBy=date&orderType=desc","getNotificationData","");}}function getNotificationData(b,c,a){if(!checkException(b.responseText)){if(b.status==200){getNotificationTotalCount();notificationTableRowData=c;Notificationflag=notificationTableRowData.length;ActivityStreamflag=notificationTableRowData.length;notificationsViewTable();}else{alert("error in data");}}}function getNotificationTotalCount(){sendGETRequest(context+"/rest/ActivityStream/totalCount?date="+new Date(),"getnotificationTotalCountCallBack","");}function getnotificationTotalCountCallBack(b,c,a){if(statuscheck(b.status,"request")){if(!checkException(b.responseText)){if(b.status==200){$("#notification_totalCount").html(c);$("#notification_pagination_totalRecord").text("Total : ");}else{alert("error in data");}}}}function notificationsViewTable(){$("#notifications_grid").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="notifications_grid_view"></table>');var a=430;notificationsTable=jQuery("#notifications_grid_view").dataTable({bFilter:false,bAutoWidth:false,aoColumns:[{sWidth:"100%"},{sWidth:"10%"},{sWidth:"10%"}],aaData:notificationTableRowData,bLengthChange:false,bPaginate:false,sScrollY:a,bJQueryUI:true,sDom:"Rlftrip",bLengthChange:false,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:notifications_thead_message,mData:"message"},{sTitle:notifications_thead_type,mData:"type"},{sTitle:notifications_thead_username,mData:"user.username"}]});$("#notifications_grid_view tbody tr td").live("hover",function(b){$("td").removeAttr("id","tooltip");if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}});RemoveUniqueLoading();}function refreshNotificationListFromPaginator(){showRegularLoading();$("#notificationpagenovalue").html(1);$("#notification_pagination_next").css("display","");$("#notification_pagination_pre").css("display","");var uperLimit=eval($("#notification_pagination_value").val());$("#notification_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit)+" "+pagination_entries+" ");sendGETRequest(context+"/rest/ActivityStream/FIQLsearch?date="+new Date()+"&ulimit="+(uperLimit-1)+"&llimit=0&orderBy=date&orderType=desc","getNotificationData","");}var permissionTableRowData="";var permissionData="";var permissionTable;var flag;var isPermissionSelected=false;var newpermissionname;var countpermissionname=0;function checkeditpermissioncall(){openEditScreen("permission");}function getpermissionTotalCount(){sendGETRequest(context+"/rest/Permissions/totalCount?date="+new Date(),"getpermissionTotalCountCallBack","");}function getpermissionTotalCountCallBack(b,c,a){if(statuscheck(b.status,"request")){if(!checkException(b.responseText)){if(b.status==200){$("#permission_totalCount").html(c);}else{alert("error in data");}}}}function getPermissionData(b,c,a){if(b.status==200){getpermissionTotalCount();permissionTableRowData=c;flag=permissionTableRowData.length;Permissionsflag=permissionTableRowData.length;permissionViewTable();$("#permission_pagination_totalRecord").text(TOTAL_COUNT_TEXT_VAR);}}function refreshAllPermissionList(){$("#permission_pagination_next").css("display","");$("#permission_pagination_pre").css("display","");var uperLimit=eval($("#permission_pagination_value").val())-1;$("#permission_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit+1)+" "+pagination_entries+" ");openListScreen("permission");sendGETRequest(context+"/rest/Permissions/search?&ulimit="+(uperLimit-1)+"&llimit="+DEFAULT_PAGE_LOWERLIMIT,"getPermissionData","");}function getFiqlPermissionData(b,c,a){if(b.status==200){permissionTableRowData=c;flag=permissionTableRowData.length;$("#permission_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" to "+(DEFAULT_PAGE_UPPERLIMIT+1)+" enteries");permissionViewTable();$("#permission_pagination_totalRecord").text(TOTAL_COUNT_TEXT_VAR);}}function searchPermissionData(b){$("#permissionfilterTab").slideToggle();var a=searchDataByFIQLPermission(b);sendGETRequest(context+"/rest/Permissions/search"+a,"getFiqlPermissionData","","");}function permissionViewTable(){$("#permission_grid").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="viewPermissionGrid"></table>');$("#viewPermissionGrid thead tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TH,this.childNodes[0]);});$("#viewPermissionGrid tbody tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TD.cloneNode(true),this.childNodes[0]);});permissionTable=$("#viewPermissionGrid").dataTable({bFilter:false,bAutoWidth:false,aoColumns:[{sWidth:"100%"},{sWidth:"10%"},{sWidth:"10%"}],aaData:permissionTableRowData,bLengthChange:false,bPaginate:false,sDom:"Rlftrip",bJQueryUI:true,bLengthChange:false,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:permissions_thead_permission,mData:"permissionname",mRender:replaceUnderscore},{sTitle:permissions_thead_description,mData:"description"},{sTitle:permissions_thead_action,mData:"action",sWidth:"20%",sClass:"details_action headeralign",fnRender:function(oObj){var action480='<div class="visible-phone hidden-desktop"><div class="inline position-relative"><button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown"><i class="icon-cog icon-only bigger-110"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow pull-right dropdown-caret dropdown-close">';action480+='<li><div class="table_view float_left" style="display:block; margin-left:15px;" id="permissions_details_act"   data-toggle="tooltip" title="View"  data-animation="true"></div></li>';action480+='<li><div class="table_edit float_left" id="permission_edit_act" style="display:block"  data-toggle="tooltip" title="Edit" data-animation="true" onclick="checkeditpermissioncall()"></div> </li>';action480+="</ul></div></div>";return'<div class="action_center_align hidden-phone  "><div class="pull-rightaction-buttons"><div class="table_view float_left" id="permissions_details_act"   data-toggle="tooltip" title="View"  data-animation="true"></div></div><a href="javascript:void(0)"  onclick="checkeditpermissioncall()"  role="button" data-toggle="modal" class="table_edit  float_left" title="Update Permission"></a></div>'+action480;}}]});$("#viewPermissionGrid tbody tr td #permissions_details_act").on("click",function(){var row=$(this).closest("tr").get(0);var aPos=permissionTable.fnGetPosition(row);var aData=permissionTable.fnGetData(aPos);openDetailScreen("permission");$("#details_permission_div span").each(function(){var getId=$(this).attr("id");var getType=$(this).attr("type");var value_Set=eval("aData."+getId)||"--";if(getId=="enabled"){enableStatus=value_Set;}if(getType=="date"){value_Set=formatAsDateandTime(value_Set,"-",true);}$(this).html(value_Set);});});$("#viewPermissionGrid tbody tr td").live("hover",function(e){var isAction=$(this).hasClass("details_action");if(!isAction){$("td").removeAttr("id","tooltip");if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}}});$("#viewPermissionGrid tbody").on("click","tr",function(){isPermissionSelected=true;$("tr").removeClass("active");$(this).addClass("active");permissionData=permissionTable.fnGetData(this);js2form(document.getElementById("edit_permission_form"),permissionData,".","",true);});RemoveUniqueLoading();}function createNewPermission(b){if(jQuery("#"+b).validationEngine("validate")){if(countpermissionname==0){var a=JSON.stringify(convertFormDataToJSON(b));sendPOSTRequest(context+"/rest/Permissions/create/",a,"createPermissionCallBack","");}if(countpermissionname!=0){$("#permission_info_user").show();}}}function createPermissionCallBack(b,c,a){RemoveUniqueLoading();if(!checkException(b.responseText)){if(b.status==200){showCenteredLoading(permissions_success_createMsg);openListScreen("permission");$("#permission_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" to "+(DEFAULT_PAGE_UPPERLIMIT+1)+" enteries");sendGETRequest(context+"/rest/Permissions/search?&ulimit="+DEFAULT_PAGE_UPPERLIMIT+"&llimit="+DEFAULT_PAGE_LOWERLIMIT,"getPermissionData","");}}}function updatePermission(b){if(jQuery("#"+b).validationEngine("validate")){var a=convertFormDataToJSON(b);sendPUTRequest(context+"/rest/Permissions/update/",JSON.stringify(a),"updatePermissionCallBack","");}}function updatePermissionCallBack(b,c,a){RemoveUniqueLoading();if(!checkException(b.responseText)){if(b.status==200){showCenteredLoading(permissions_success_updateMsg);openListScreen("permission");$("#permission_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" to "+(DEFAULT_PAGE_UPPERLIMIT+1)+" enteries");sendGETRequest(context+"/rest/Permissions/search?&ulimit="+DEFAULT_PAGE_UPPERLIMIT+"&llimit="+DEFAULT_PAGE_LOWERLIMIT,"getPermissionData","");}}}function getPermissionSearchData(b,c,a){if(b.status==200){if(c.length==1){$("#permission_info_user").show();countpermissionname++;}else{$("#permission_info_user").hide();}}}var newrolename;var countrolename=0;var roleTable1;var RoleTableRowData="";var permissionsData="";var roleTable2;var roleTable;var isRoleSelected=false;var rolepermission;var rolesoldnTr=null;function searchRoleData(b){showRegularLoading();$("#rolefilterTab").slideToggle();var a=searchDataByFIQL(b);fiqlRolesParam=a;sendGETRequest(context+"/rest/Roles/search"+a+"&date="+new Date(),"getRoleData","","");}function checkeditrolecall(){openEditScreen("role");}function getroleTotalCount(){sendGETRequest(context+"/rest/Roles/totalCount?date="+new Date(),"getroleTotalCountCallBack","");}function getroleTotalCountCallBack(b,c,a){if(statuscheck(b.status,"request")){if(!checkException(b.responseText)){if(b.status==200){$("#role_totalCount").html(c);}else{alert("error in data");}}}}function getRoleData(b,c,a){if(b.status==200){getroleTotalCount();RoleTableRowData=c;Rolesflag=RoleTableRowData.length;RoleViewTable();$("#role_pagination_totalRecord").text(TOTAL_COUNT_TEXT_VAR);}}function getPermissionsData(b,c,a){if(b.status==200){permissionsData=c;}}function userPermissionsDataTables(){$("#UserPermissionsTable").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="userPermissions"></table>');roleTable2=$("#userPermissions").dataTable({bFilter:false,bScrollCollapse:true,bPaginate:false,bJQueryUI:true,sDom:"rlftrip",aaSorting:[[1,"asc"]],aoColumns:[{sTitle:roles_permission_thead_permissionname,mData:"permissionname"},{sTitle:roles_permission_thead_description,mData:"description"},{bSortable:false,aTargets:[0],mRender:function(c,b,a){return'<button class="btn btn-mini btn-info" id="Permissions_delete_act" data-toggle="tooltip" title="Delete"  data-animation="true"><i class="icon-minus"></i></button>';}}]});$("#viewAuditGrid tbody tr td").live("hover",function(b){var a=$(this).hasClass("details_action");if(!a){$("td").removeAttr("id","tooltip");if(!$(this).hasClass("details")){}if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}}});$("#userPermissions tbody tr td #Permissions_delete_act").on("click",function(){var c=$(this).closest("tr").get(0);var a=roleTable2.fnGetPosition(c);var b=roleTable2.fnGetData(a);roleTable2.fnDeleteRow(a,null,true);roleTable2.fnDraw();});}function removePermissionTableData(){$("#add_permission_list_tbody").find("input[type=checkbox]").each(function(){$(this).attr("checked",false);});$("#add_permission_db_widget_list_tbody").find("input[type=checkbox]").each(function(){$(this).attr("checked",false);});$("#add_permission_list_tbody").empty();$("#edit_permission_list_tbody").empty();$("#edit_permission_db_widget_list_tbody").empty();$("#add_permission_db_widget_list_tbody").empty();createPermissionRowForRole("add_permission_list_tbody");addDashboardWidgetPermission("add_permission_db_widget_list_tbody");}function refreshAllRoleList(){showRegularLoading();$("#role_pagination_next").css("display","");$("#role_pagination_pre").css("display","");var uperLimit=eval($("#role_pagination_value").val());$("#role_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" "+pagination_to+" "+(uperLimit)+" "+pagination_entries+" ");openListScreen("role");sendGETRequest(context+"/rest/Roles/search?&date="+new Date()+"&ulimit="+(uperLimit-1)+"&llimit="+DEFAULT_PAGE_LOWERLIMIT,"getRoleData","");}function permissionsDataTable(){$("#AllPermissionsTable").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="Permissionstable"></table>');roleTable1=$("#Permissionstable").dataTable({bFilter:false,bScrollCollapse:true,bPaginate:false,bJQueryUI:true,sDom:"Rlftrip",aaData:permissionsData,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:roles_permission_thead_permissionname,mData:"permissionname"},{sTitle:roles_permission_thead_description,mData:"description"},{bSortable:false,aTargets:[0],mRender:function(c,b,a){return'<button class="btn btn-mini btn-info" id="Permissions_add_act" data-toggle="tooltip" title="Add"  data-animation="true"><i class="icon-plus"></i></button>';}}]});$("#Permissionstable tbody tr td").live("hover",function(a){$("td").removeAttr("id","tooltip");if($(this).hasClass("details")||($(this).hasClass("Action"))){$(this).removeAttr("id","tooltip");}if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}});$("#Permissionstable tbody tr td #Permissions_add_act").on("click",function(){var f=$(this).closest("tr").get(0);var e=roleTable1.fnGetPosition(f);var b=roleTable1.fnGetData(e);var g=roleTable2.fnGetNodes();var d=0;for(var c in g){if(JSON.stringify(b)===JSON.stringify(roleTable2.fnGetData(c))){d=1;}}if(d==0){roleTable2.fnAddData(b);}return false;});}function RoleViewTable(){$("#roleViewGrid").html('<table  cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="viewRoleGrid"></table>');jQuery("#viewRoleGrid thead tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TH,this.childNodes[0]);});jQuery("#viewRoleGrid tbody tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TD.cloneNode(true),this.childNodes[0]);});roleTable=$("#viewRoleGrid").dataTable({bFilter:false,bAutoWidth:false,aoColumns:[{sWidth:"100%"},{sWidth:"10%"},{sWidth:"10%"}],aaData:RoleTableRowData,bLengthChange:false,bPaginate:false,bJQueryUI:true,sDom:"Rlftrip",bLengthChange:false,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:roles_thead_rolename,mData:"rolename"},{sTitle:roles_thead_description,mData:"description"},{sTitle:roles_thead_action,sWidth:"20%",sClass:"details_action headeralign",fnRender:function(oObj){var action480='<div class="visible-phone hidden-desktop"><div class="inline position-relative"><button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown"><i class="icon-cog icon-only bigger-110"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow pull-right dropdown-caret dropdown-close"><li><div class="table_view float_left" style="display:block; margin-left:15px;" id="roles_details_act"   data-toggle="tooltip" title="View"  data-animation="true"></div></li><li><div class="table_edit float_left" id="roles_edit_act" style="display:block"  data-toggle="tooltip" title="Update Role" data-animation="true"></div> </li>';return'<div class="action_center_align hidden-phone" ><div class="" ><div class="table_view float_left" id="roles_details_act"   data-toggle="tooltip" title="View"  data-animation="true"></div><div id="roles_edit_act"   class="table_edit float_left" title="Update Role"></div></div></div>'+action480;}}]});$("#viewRoleGrid tbody tr td #roles_edit_act").on("click",function(){$("#edit_permission_list_tbody").find("input[type=checkbox]").each(function(){$(this).attr("checked",false);});$("#edit_permission_db_widget_list_tbody").find("input[type=checkbox]").each(function(){$(this).attr("checked",false);});$("#add_permission_list_tbody").empty();$("#edit_permission_list_tbody").empty();$("#edit_permission_db_widget_list_tbody").empty();$("#add_permission_db_widget_list_tbody").empty();createPermissionRowForRole("edit_permission_list_tbody");addDashboardWidgetPermission("edit_permission_db_widget_list_tbody");var row=$(this).closest("tr").get(0);var aPos=roleTable.fnGetPosition(row);var aData=roleTable.fnGetData(aPos);openEditScreen("role");rolepermission=aData.permissions;for(var i=0;i<rolepermission.length;i++){var selectId=rolepermission[i].permissionname.toLowerCase();$("#edit_permission_db_widget_list_tbody #"+selectId).attr("checked",true);}for(var i=0;i<rolepermission.length;i++){var permissioncheck=rolepermission[i].permissionname;if(hasValue(permissioncheck)){$("#edit_permission_list_tbody #"+permissioncheck).attr("checked",true);}if(permissioncheck=="usermgmt"){$("#edit_permission_list_tbody #"+permissioncheck+"read").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"create").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"update").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"delete").attr("checked",true);}if(permissioncheck=="reporting"){$("#edit_permission_list_tbody #"+permissioncheck+"read").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"create").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"update").attr("checked",true);$("#edit_permission_list_tbody #"+permissioncheck+"delete").attr("checked",true);}}js2form(document.getElementById("edit_role_form"),aData,".","",true);});$("#viewRoleGrid tbody tr td #roles_details_act").on("click",function(){var row=$(this).closest("tr").get(0);var aPos=roleTable.fnGetPosition(row);var aData=roleTable.fnGetData(aPos);openDetailScreen("role");$("#details_role_div span").each(function(){var getId=$(this).attr("id");var getType=$(this).attr("type");var value_Set=eval("aData."+getId)||"--";if(getId=="enabled"){enableStatus=value_Set;}if(getType=="date"){value_Set=formatAsDateandTime(value_Set,"-",true);}$(this).html(value_Set);});});$("#viewRoleGrid tbody tr td").live("hover",function(e){var isAction=$(this).hasClass("details_action");if(!isAction){$("td").removeAttr("id","tooltip");if(!$(this).hasClass("details")){}if($(this).text().length!=0){$("#tooltip").tooltipster({theme:".tooltipster-punk",fixedWidth:2});}}});$("#viewRoleGrid tbody td").click(function(){var array=new Array();$("tr").removeClass("active");$(this).parents("tr").addClass("active");var visibleLength=0;for(i=0;i<roleTable.fnSettings().aoColumns.length;i++){if(roleTable.fnSettings().aoColumns[i].bVisible){array.push(roleTable.fnSettings().aoColumns[i].sTitle);}}var nTr=$(this).parents("tr")[0];var oSettings=roleTable.fnSettings();if(!$(this).hasClass("details_action")&&array[$(this).index()]!="Action"){if(rolesoldnTr!=nTr&&rolesoldnTr!=null){roleTable.fnClose(rolesoldnTr);roleTable.fnDraw();}if(roleTable.fnIsOpen(nTr)){roleTable.fnClose(rolesoldnTr);}else{rolesoldnTr=nTr;roleTable.fnOpen(nTr,fnFormatDetails(roleTable,nTr),"details");}return false;}});function fnFormatDetails(oTable,nTr){var aData=oTable.fnGetData(nTr);var sOut='<div class="permission" id="hello" style="margin-left: 12%; margin-right:7%; border: solid 2px; border:solid 2px;border-color: rgba(122, 163, 163, 0.94);"><table  class="permission" id="ggh" cellpadding="5" cellspacing="0" border="0" >';sOut+='<tr class="permission"><th class="span6 permission">'+roles_tbody_thead_permission+'</th><th class="span6 permission">'+roles_tbody_thead_description+"</th></tr>";for(var i=0;i<aData.permissions.length;i++){sOut+='<tr class="permission"><td class="span10 permission">'+aData.permissions[i].permissionname+'</td><td class="span10 permission">'+aData.permissions[i].description+"</td></tr>";}sOut+="</table></div>";return sOut;}$("#viewRoleGrid tbody").on("click","tr",function(){isRoleSelected=true;$("tr").removeClass("active");$(this).addClass("active");roleData=roleTable.fnGetData(this);js2form(document.getElementById("edit_role_form"),roleData,".","",true);});RemoveUniqueLoading();}function createNewRole(b){if(jQuery("#"+b).validationEngine("validate")){if(countrolename==0){var c=JSON.stringify(convertFormDataToJSON(b));c=c.substring(0,c.length-1);var f=roleTable2.fnGetNodes();var d="";if(!f.length==0){for(var h in f){var k=roleTable2.fnGetData(h);var j=k.description;var e=k.permissionid;var g=k.permissionname;d+='{"description":"'+j+'","permissionid":"'+e+'","permissionname":"'+g+'"},';}d=d.substring(0,d.length-1);}c+=',"permissions":['+d+"]}";sendPOSTRequest(context+"/rest/Roles/create/",c,"createNewRoleCallBack","");}if(countrolename!=0){$("#role_info_user").show();}}}function createNewRoleCallBack(b,c,a){RemoveUniqueLoading();if(!checkException(b.responseText)){if(b.status==200){showCenteredLoading(roles_success_createMsg);openListScreen("role");$("#role_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" to "+(DEFAULT_PAGE_UPPERLIMIT+1)+" enteries");sendGETRequest(context+"/rest/Roles/search?&ulimit="+DEFAULT_PAGE_UPPERLIMIT+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&date="+new Date(),"getRoleData","");}}}function updateRole(b){if(jQuery("#"+b).validationEngine("validate")){var a=convertFormDataToJSON(b);a=JSON.stringify(a);a=a.substring(0,(a.length-1))+',"permissions":'+JSON.stringify(rolepermission)+"}";sendPUTRequest(context+"/rest/Roles/update/",a,"updateRoleCallBack","");}}function updateRoleCallBack(b,c,a){RemoveUniqueLoading();if(!checkException(b.responseText)){if(b.status==200){openListScreen("role");showCenteredLoading("Role updated successfully");$("#role_pagination #content").text(pagination_showing+" "+(DEFAULT_PAGE_LOWERLIMIT+1)+" to "+(DEFAULT_PAGE_UPPERLIMIT+1)+" enteries");$("#rolepagenovalue").html(1);sendGETRequest(context+"/rest/Roles/search?&ulimit="+DEFAULT_PAGE_UPPERLIMIT+"&llimit="+DEFAULT_PAGE_LOWERLIMIT+"&date="+new Date(),"getRoleData","");}}}function getRoleSearchData(b,c,a){if(b.status==200){if(c.length==1){$("#role_info_user").show();$("#role_info_user").css("top",($("#add_role_form #rolename").offset().top-92)+"px");countrolename++;}else{$("#role_info_user").hide();}}}function selectViewPermissionCheckbox(b){var c=b.id;if(b.id.match(/create/)=="create"){var a=c.replace("create","");$("#"+a+"read").attr("checked",true);}else{if(b.id.match(/update/)=="update"){var a=c.replace("update","");$("#"+a+"read").attr("checked",true);}else{if(b.id.match(/delete/)=="delete"){var a=c.replace("delete","");$("#"+a+"read").attr("checked",true);}}}}function createPermissionRowForRole(a){$("#"+a).empty();var d=new Array();d=tabNameArr;var c;var j;var g;var e;var b;for(var f=0;f<d.length;f++){var h=d[f];c=d[f]+"row_"+f;j=d[f]+"read";g=d[f]+"create";e=d[f]+"update";b=d[f]+"delete";if(h=="usermgmt"){h="User Management";}if(h=="reporting"){h="Reporting";}$("#"+a).append("<tr id='"+c+"'><td>"+h+"</td><td class='center'><label class='roleSwitch' style='width:60px'><input id='"+j+"' type='checkbox' value='"+j+"' name='switch-field-1' class='ace ace-switch ace-switch-6'><span class='lbl /*check_read/'></span></label></td><td class='center'><label style='width:60px' class='roleSwitch'><input onchange='selectViewPermissionCheckbox(this);'  id='"+g+"' value='"+g+"' type='checkbox' name='switch-field-1' class='ace ace-switch ace-switch-6'><span class='lbl /*check_add*/'></span></label></td><td class='center'><label style='width:60px' class='roleSwitch'><input onchange='selectViewPermissionCheckbox(this);' type='checkbox' value='"+e+"' id='"+e+"'name='switch-field-1' class='ace ace-switch ace-switch-6'><span class='lbl /*check_update*/'></span></label></td><td class='center'><label style='width:60px' class='roleSwitch'><input type='checkbox' onchange='selectViewPermissionCheckbox(this);' value='"+b+"' id='"+b+"' name='switch-field-1' class='ace ace-switch ace-switch-6'><span class='lbl /*check_delete*/'></span></label></td></tr>");}}function addDashboardWidgetPermission(g){for(var b=0;b<dashboardChartData.length;b++){var f=dashboardChartData[b];var a=f.id;var e=f.title;var c;var d;if(hasValue(f.permission_name)){c=f.permission_name;d=c.toLowerCase();}else{c=f.permission;replaceAll("view_",f.permission,"canView");c=replaceAll("_permission",c,"");c=replaceAll("_",c,"");d=c.toLowerCase();d="can"+d;}if(d.length>3){$("#"+g).append("<tr><td>"+e+"</td><td class='center'><label style='width:87px'><input id='"+d+"' value='"+c+"' type='checkbox' name='switch-field-1' class='ace ace-switch ace-switch-6'><span class='lbl'></span></label></td></tr>");}}}function AddRolePermissionMapping(){if($("#add_role_form").validationEngine("validate")){var a=new Array();$("#add_permission_list_tbody tr").each(function(){var b=$(this).attr("id");$("#"+b+" td").each(function(){if(hasValue($(this).find("input[type=checkbox]"))){var c=$(this).find("input[type=checkbox]").attr("checked");if(hasValue(c)){if(c=="checked"){a.push($(this).find("input").val());}}}});});$("#add_permission_db_widget_list_tbody tr td").each(function(){var b=$(this).find("input").attr("checked");if(b=="checked"){a.push($(this).find("input").val());}});getAllIdFromPermissionData(a);}}function PermissionMappingupdateRole(){if($("#edit_role_form").validationEngine("validate")){var a=new Array();$("#edit_permission_list_tbody tr").each(function(){var b=$(this).attr("id");$("#"+b+" td").each(function(){if(hasValue($(this).find("input"))){var c=$(this).find("input").attr("checked");if(c=="checked"){a.push($(this).find("input").val());}}});});$("#edit_permission_db_widget_list_tbody tr td").each(function(){var b=$(this).find("input").attr("checked");if(b=="checked"){a.push($(this).find("input").val());}});a=getUniqueArray(a);getAllIdFromPermissionupdateData(a);}}function getAllIdFromPermissionupdateData(d){var c=new Array();if(permissionsData.length>0){for(var e=0;e<d.length;e++){var b;if(d[e]=="reportingread"||d[e]=="reportingcreate"||d[e]=="reportingupdate"||d[e]=="reportingdelete"||d[e]=="usermgmtread"||d[e]=="usermgmtcreate"||d[e]=="usermgmtupdate"||d[e]=="usermgmtdelete"){if(d[e]=="reportingread"||d[e]=="reportingcreate"||d[e]=="reportingupdate"||d[e]=="reportingdelete"){b=3;}else{b=2;}}else{b=getPermissionIdFromPermission(d[e]);}if(hasValue(b)){c.push(b);}c.push(300);c=getUniqueArray(c);}}var a=JSON.stringify(convertFormDataToJSON("edit_role_form"));a=a.substring(0,a.length-1);var f="";for(var e=0;e<c.length;e++){f+='{"permissionid":"'+c[e]+'","permissionname":"'+d[e]+'"},';}f=f.substring(0,f.length-1);a+=',"permissions":['+f+"]}";sendPUTRequest(context+"/rest/Roles/update/",a,"updateRoleCallBack","");f="";return c;}function getAllIdFromPermissionData(c){var b=new Array();if(permissionsData.length>0){for(var d=0;d<c.length;d++){var a;if(c[d]=="reportingread"||c[d]=="reportingcreate"||c[d]=="reportingupdate"||c[d]=="reportingdelete"||c[d]=="usermgmtread"||c[d]=="usermgmtcreate"||c[d]=="usermgmtupdate"||c[d]=="usermgmtdelete"){if(c[d]=="reportingread"||c[d]=="reportingcreate"||c[d]=="reportingupdate"||c[d]=="reportingdelete"){a=2;}else{a=3;}}else{a=getPermissionIdFromPermission(c[d]);}if(hasValue(a)){b.push(a);}b=getUniqueArray(b);}}var f=JSON.stringify(convertFormDataToJSON("add_role_form"));f=f.substring(0,f.length-1);var e="";for(var d=0;d<b.length;d++){e+='{"permissionid":"'+b[d]+'","permissionname":"'+c[d]+'"},';}e=e.substring(0,e.length-1);f+=',"permissions":['+e+"]}";sendPOSTRequest(context+"/rest/Roles/create/",f,"createNewRoleCallBack","");return b;}function getPermissionIdFromPermission(a){if(permissionsData.length>0){for(var b=0;b<permissionsData.length;b++){var c=permissionsData[b];if(c.permissionname.toLowerCase()==a.toLowerCase()){return c.permissionid;}}}return"";}var rolesData="";var oTable2;var userRole="";var userid;var oTable1;function getUsersRoleDataById(b,c,a){if(b.status==200){userRole=c;}}function getRolesDataUser(b,c,a){if(b.status==200){rolesData=c;rolesDataTableUser();}}function rolesDataTableUser(){$("#AllRolesTableUser").html('<table cellpadding="0" cellspacing="0" border="0" class="display mytb table table-striped table-bordered" id="RolestableUser"></table>');$("#RolestableUser thead tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TH,this.childNodes[0]);});$("#RolestableUser tbody tr").each(function(){this.insertBefore(VIEW_DETAIL_SPAN_TD.cloneNode(true),this.childNodes[0]);});oTable1=$("#RolestableUser").dataTable({bFilter:false,bScrollCollapse:false,aoColumns:[{sWidth:"100%"},{sWidth:"30%"},{sWidth:"10%"}],bPaginate:false,bJQueryUI:true,sDom:"rlftrip",aaData:rolesData,aaSorting:[[1,"asc"]],aoColumns:[{sTitle:user_role_thead_rolename,mData:"rolename",mRender:function(c,b,a){return makeFirstLetterUpperCase(c);}},{sTitle:user_role_thead_description,mData:"description",mRender:function(c,b,a){return makeFirstLetterUpperCase(c);}},{bSortable:false,aTargets:[0],mRender:function(c,b,a){return'<label><input name="switch-field-1" class="ace ace-switch ace-switch-6" type="checkbox"><span class="lbl"></span></label>';}}]});window.setTimeout(function(){oTable1.fnDraw();},300);userRoleTables();RemoveUniqueLoading();}function userRoleTables(){for(var a=0;a<userRole.length;a++){$("#RolestableUser tbody tr ").each(function(){var d=$(this).closest("tr").get(0);var b=oTable1.fnGetPosition(d);if(hasValue(b)){var c=oTable1.fnGetData(b);if(c.roleid==userRole[a].roleid){$(d).find("input:checkbox:first").attr("checked","true");}}});}}function update_roles(){var a=[];$("#RolestableUser tbody tr ").each(function(){var e=$(this).closest("tr").get(0);var c=oTable1.fnGetPosition(e);if(hasValue(c)){var d=oTable1.fnGetData(c);var b=$(e).find("input:checkbox:first").is(":checked");if(b){a.push(d.roleid);}}});a=JSON.stringify(a);if(a=="[]"){showErrorLoading("Please assign atleast one role");}else{sendPUTRequest(context+"/rest/Users/updateRoles/"+userid,a,"update_roles_callback","");}}function update_roles_callback(b,c,a){if(!checkException(b.responseText)){if(b.status==200){$(".modal-backdrop").css("z-index",-3);$("#Update_Role_Modal").fadeOut();showCenteredLoading(user_success_roleupdateMsg);openListScreen("users");if(useridDb==LOGIN_USER_ID){logout();}}else{showErrorLoading(user_error_roleupdateMsg);}}}